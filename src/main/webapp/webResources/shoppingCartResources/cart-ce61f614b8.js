!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="//store.res.meizu.com/order/",e(0)}(function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(typeof t[e]){case"function":break;case"object":t[e]=function(e){var n=e.slice(1),i=t[e[0]];return function(t,e,a){i.apply(this,[t,e,a].concat(n))}}(t[e]);break;default:t[e]=t[t[e]]}return t}([function(t,e,n){n(106);var i=n(8),a=JSON.parse(JSON.stringify(window.MZSTORECARTDATA)),s=n(107),r=n(110),o=n(118),c=n(31).magnet,d="checked",u=function(){var t=i(".JSelectAll"),e=i("#J-cartHearCtrl");t.on("click",function(){var e=r.selectAll(),n=i(".mz-checkbox",t);e?n.addClass(d):n.removeClass(d)}),e.on("click",function(){r.editShowAll()}),r.on("selectedAll",function(e){var n=i(".mz-checkbox",t);e?n.addClass(d):n.removeClass(d)})};a.cart&&(a.cart.merchants.length||a.cart.invalids.length)?(n(124),u(),s.init(),r.init(a.cart,a.timestamp)):o.init(),c.init({cart:!1})},,,,,,,,function(t,e){t.exports=meizuStoreGlobal.jquery},function(t,e,n){n(10);var i=n(8),a=n(12),s=n(13),r="hide",o=function(){return this._events={},s.apply(this,arguments),arguments.length?this.init.apply(this,arguments):this};o.prototype=new s,o.prototype.constructor=o,o.prototype._template=a.template(n(14),{variable:"data"}),o.prototype.defaultOptions={type:"dialog",hasClose:!0,title:"",content:"",contentTitle:"",buttons:[]},o.prototype.init=function(t){var e=this,n={};return n.buttons=[{type:"success",text:"确定",callback:function(){var t=!0;e.emit("beforeSuccess",function(){t=!1}),t&&(e.hide(),e.emit("success"))}}],"tips"!==t.type&&n.buttons.push({type:"cancel",text:"取消",callback:function(){var t=!0;e.emit("beforeCancel",function(){t=!1}),t&&(e.hide(),e.emit("cancel"))}}),this.options=i.extend({},this.defaultOptions,n,t),this.$dialog=i(this._template(this.options)).appendTo("body"),i(".mz-dialog-content",this.$dialog).append(this.options.content),i(".mz-dialog-bottom .mz-btn",this.$dialog).on("click",function(){var t=i(this).index(),n=e.options.buttons[t].callback;i.isFunction(n)&&n.call(e)}),this.options.hasClose&&i(".mz-dialog-close",this.$dialog).on("click",function(){var t=!0;e.emit("beforeClose",function(){t=!1}),t&&(e.hide(),e.emit("close"))}),this._init=!0,this},o.prototype._initDom=function(){return this},o.prototype.show=function(t,e){if(!this._init)return this.init(t).show(t,!0);if(t&&!e&&((t.type||t.className)&&i(".mz-dialog",this.$dialog).attr("class","mz-dialog").addClass((t.type||"")+" "+(t.className||"")),void 0!==t.hasClose&&(t.hasClose?i(".mz-dialog-close",this.$dialog).removeClass(r):i(".mz-dialog-close",this.$dialog).addClass(r)),void 0!==t.title&&i(".mz-dialog-title",this.$dialog).text(t.title),void 0!==t.content&&i(".mz-dialog-content",this.$dialog).empty().append(t.content),void 0!==t.contentTitle&&i(".mz-dialog-content-title",this.$dialog).text(t.contentTitle),i.isArray(t.buttons))){var n=t.buttons.map(function(t){if(!i.isFunction(t.callback))throw new TypeError("Callback must be a function.");return i('<div class="mz-btn '+t.type+'">'+t.text+"</div>").on("click",t.callback.bind(this))});i(".mz-dialog-bottom",this.$dialog).empty().append(n)}var a=!0;return this.emit("beforeShow",function(){a=!1}),a&&(this.$dialog.removeClass(r),this.emit("show")),this},o.prototype.setPosition=function(){var t=i(".mz-dialog",this.$dialog),e=t.outerHeight(),n=t.outerWidth();t.css({marginLeft:-(n/2),marginTop:-(e/2)})},o.prototype.hide=function(){var t=!0;return this.emit("beforeHide",function(){t=!1}),t&&(this.emit("hide"),this.$dialog.addClass(r)),this},o.prototype.destroy=function(){var t=!0;return this.emit("beforeDestroy",function(){t=!1}),t&&(this.emit("destroy"),this.$dialog.remove(),this._init=!1),this},t.exports=o},function(t,e){},,function(t,e){t.exports=meizuStoreGlobal.underscore},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function a(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function r(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!a(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,a,o,c,d;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(n=this._events[t],r(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(s(n))for(o=Array.prototype.slice.call(arguments,1),d=n.slice(),a=d.length,c=0;c<a;c++)d[c].apply(this,o);return!0},n.prototype.addListener=function(t,e){var a;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(a=r(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,a&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,"function"==typeof console.trace)),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),a||(a=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var a=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,a,r,o;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],r=n.length,a=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(o=r;o-- >0;)if(n[o]===e||n[o].listener&&n[o].listener===e){a=o;break}if(a<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(a,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){t.exports='<div class="mz-mask hide">\n  <div class="mz-dialog <%= data.type %> <%= data.className %>">\n    <div class="mz-dialog-header">\n      <div class="mz-dialog-title"><%= data.title %></div>\n      <div class="mz-dialog-close<%= data.hasClose ? \'\' : \' hide\' %>"></div>\n    </div>\n    <div class="mz-dialog-main">\n      <div class="mz-dialog-warp">\n        <% if (data.contentTitle) { %>\n        <div class="mz-dialog-content-title"><%= data.contentTitle %></div>\n        <% } %>\n        <div class="mz-dialog-content"></div>\n      </div>\n    </div>\n    <% if (data.buttons) { %>\n    <div class="mz-dialog-bottom">\n      <% data.buttons.forEach(function(btn) { %>\n      <div class="mz-btn <%= btn.type %>"><%= btn.text %></div>\n      <% }) %>\n    </div>\n    <% } %>\n  </div>\n</div>\n'},function(t,e,n){n(16);var i=n(8),a=n(18)("animation"),s='<div class="mz-loading-mask" />',r='<div class="mz-loading" />',o=['<div class="mz-bounce mz-bounce1"></div>','<div class="mz-bounce mz-bounce2"></div>','<div class="mz-bounce mz-bounce3"></div>'].join(""),c=function(t){var e=i(t||"body");"static"===e.css("position")&&"body"!==e.selector&&e.css("position","relative");var n=!1,c=e.children(".mz-loading-mask");c.length||(c=i(s),n=!0);var d=e.outerHeight(),u=e.outerWidth();if(c.css({width:u,height:d}),!n)return c.show();var l;return l=a?i(r).addClass("spinner").append(o):i(r).addClass("image"),c.append(l).appendTo(e)},d=function(t){var e=i(t||"body"),n=e.children(".mz-loading-mask");return!!n.length&&n.hide()};t.exports={show:c,hide:d}},10,,function(t,e){t.exports=function(t){var e,n=["webkit","Moz","ms","o"],i=[],a=document.documentElement.style,s=function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})};for(e=0;e<n.length;e++)i.push(s(n[e]+"-"+t));for(i.push(s(t)),e=0;e<i.length;e++)if(i[e]in a)return!0;return!1}},,,,,,,,,,,function(t,e,n){var i=n(8),a=n(13),s=function(){return this._events={},a.apply(this,arguments),this.init.apply(this,arguments)};s.prototype=new a,s.prototype.constructor=s,s.prototype.defaultOptions={time:0,step:1,timeStep:1e3},s.prototype.init=function(t){if(this._isInit)return this;var e=this;return this._isInit=!0,this._cumulative=0,this.options=i.extend({},this.defaultOptions,t),this.on("count",function(t){e.options.time=t}),0!==this.options.time&&this.count(this.options.time),this},s.prototype._correct=function(t){if(!this._correctTime)return this._correctTime=+new Date,t;var e=+new Date,n=this.options.timeStep,i=e-n;if(this._cumulative+=i-this._correctTime,this._cumulative>=n){var a=Math.floor(this._cumulative/n);this._cumulative=this._cumulative%n,t-=a*this.options.step}return this._correctTime=e,t},s.prototype.count=function(t,e){if(!e&&this._counting)return!1;var n=this;return t=this._correct(t),this._counting=setTimeout(function(){var e=t-n.options.step;e=e>=0?e:0,n.emit("count",e,t),e>0?n.count(e,!0):(delete n.counting,n.emit("end"))},this.options.timeStep),this},s.prototype.pause=function(){return clearTimeout(this._counting),delete this._counting,this},s.prototype.proceed=function(){return this.count(this.options.time),this},s.prototype.stop=function(){return clearTimeout(this._counting),delete this._counting,delete this._correctTime,this._cumulative=0,this},s.prototype.start=function(t){return this.options=i.extend({},this.options,t),this.count(this.options.time),this},t.exports=s},function(t,e,n){var i=n(8),a=n(13),s=function(){return this._events={},a.apply(this,arguments),this.init.apply(this,arguments)};s.prototype=new a,s.prototype.constructor=s,s.prototype.init=function(t){return this.options=i.extend({},this.defaultOptions,t),this},s.prototype.defaultOptions={url:"/independent"},s.prototype.get=function(t,e){return!(!t||!i.isFunction(t))&&void i.ajax({url:this.options.url,type:"get",cache:!1,async:!e,success:function(e,n,i){if(200==e.code){var a=i.getResponseHeader("X-CSRF-TOKEN");t(null,a,i)}else t(e.error)},error:function(){t("网络错误")}})},s.prototype.async=function(){var t="";return this.get(function(e,n){if(e)throw Error(e);t=n},!0),t},t.exports=function(t){return new s(t)}},function(t,e){t.exports=meizuStoreGlobal},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){!function(t,e,n,i){var a=t(e);t.fn.lazyload=function(s){function r(){var e=0;c.each(function(){var n=t(this);if(!d.skip_invisible||n.is(":visible"))if(t.abovethetop(this,d)||t.leftofbegin(this,d));else if(t.belowthefold(this,d)||t.rightoffold(this,d)){if(++e>d.failure_limit)return!1}else n.trigger("appear"),e=0})}var o,c=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:e,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(i!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),i!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),t.extend(d,s)),o=d.container===i||d.container===e?a:t(d.container),0===d.event.indexOf("scroll")&&o.bind(d.event,function(){return r()}),this.each(function(){var e=this,n=t(e);e.loaded=!1,n.attr("src")!==i&&n.attr("src")!==!1||n.is("img")&&n.attr("src",d.placeholder),n.one("appear",function(){if(!this.loaded){if(d.appear){var i=c.length;d.appear.call(e,i,d)}t("<img />").bind("load",function(){var i=n.attr("data-"+d.data_attribute);n.hide(),n.is("img")?n.attr("src",i):n.css("background-image","url('"+i+"')"),n[d.effect](d.effect_speed),e.loaded=!0;var a=t.grep(c,function(t){return!t.loaded});if(c=t(a),d.load){var s=c.length;d.load.call(e,s,d)}}).attr("src",n.attr("data-"+d.data_attribute))}}),0!==d.event.indexOf("scroll")&&n.bind(d.event,function(){e.loaded||n.trigger("appear")})}),a.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&a.bind("pageshow",function(e){e.originalEvent&&e.originalEvent.persisted&&c.each(function(){t(this).trigger("appear")})}),t(n).ready(function(){r()}),this},t.belowthefold=function(n,s){var r;return r=s.container===i||s.container===e?(e.innerHeight?e.innerHeight:a.height())+a.scrollTop():t(s.container).offset().top+t(s.container).height(),r<=t(n).offset().top-s.threshold},t.rightoffold=function(n,s){var r;return r=s.container===i||s.container===e?a.width()+a.scrollLeft():t(s.container).offset().left+t(s.container).width(),r<=t(n).offset().left-s.threshold},t.abovethetop=function(n,s){var r;return r=s.container===i||s.container===e?a.scrollTop():t(s.container).offset().top,r>=t(n).offset().top+s.threshold+t(n).height()},t.leftofbegin=function(n,s){var r;return r=s.container===i||s.container===e?a.scrollLeft():t(s.container).offset().left,r>=t(n).offset().left+s.threshold+t(n).width()},t.inviewport=function(e,n){return!(t.rightoffold(e,n)||t.leftofbegin(e,n)||t.belowthefold(e,n)||t.abovethetop(e,n))},t.extend(t.expr[":"],{"below-the-fold":function(e){return t.belowthefold(e,{threshold:0})},"above-the-top":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-screen":function(e){return t.rightoffold(e,{threshold:0})},"left-of-screen":function(e){return!t.rightoffold(e,{threshold:0})},"in-viewport":function(e){return t.inviewport(e,{threshold:0})},"above-the-fold":function(e){return!t.belowthefold(e,{threshold:0})},"right-of-fold":function(e){return t.rightoffold(e,{threshold:0})},"left-of-fold":function(e){return!t.rightoffold(e,{threshold:0})}})}(jQuery,window,document)},,function(t,e){t.exports=function(t){var e=parseInt(t/864e5,10),n=parseInt((t-864e5*e)/36e5,10),i=parseInt((t-864e5*e-36e5*n)/6e4,10),a=parseInt((t-864e5*e-36e5*n-6e4*i)/1e3,10);e=e>0?e<10?"0"+e:e:0,n=n>0?n<10?"0"+n:n:0,i=i>0?i<10?"0"+i:i:0,a=a>0?a<10?"0"+a:a:0;var s=e>0?" "+e+"天"+n+"时"+i+"分"+a+"秒 ":n>0?" "+n+"时"+i+"分"+a+"秒 ":i>0?i+"分"+a+"秒 ":a+"秒 ";return{day:e,hour:n,minute:i,second:a,string:s}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,10,function(t,e,n){n(108);var i="fixed",a=n(8),s=n(12),r=n(31).login,o=n(15),c=n(30)({url:"/getcsrf"}),d=n(9),u=n(31).cartInterface,l=n(109),p=n(110),h=n(118),m=s.template(n(123),{variable:"data"}),f=a("#cartFooter"),v=a("#totalCount"),g=a("#totalSelectedCount"),b=a("#totalDiscount"),k=a("#totalPrice"),y=a("#removeSelected"),_=a("#cartSubmit"),x=!1,I=new d({title:"提示",type:"tips"}),w=new d({title:"删除",content:"您确定要删除选中商品吗？",buttons:[{type:"cancel",text:"删除",callback:function(){var t=this,e=l.getSelected(),n=l.getSkus(),i=Object.keys(e).map(function(t){var n=e[t],i=[];return n.hasTheBinder&&n.theBinders&&n.theBinders.forEach(function(t){i.push({skuId:t.skuId})}),{id:n.cartItemId,skuId:n.skuId,packageId:n.packageId,packageSkuIds:n.packageStr,theBinder:i}});o.show(this.$dialog),u.del(i,function(e){return e?(t.hide(),o.hide(t.$dialog),I.show({content:e})):(l.clear(),p.removeSelected(n),o.hide(t.$dialog),void t.hide())})}},{type:"success",text:"取消",callback:function(){this.hide()}}]}),T=function(){var t=l.getSelected();return Object.keys(t).sort(function(e,n){return t[e].thisIndex-t[n].thisIndex}).map(function(e){var n=t[e],i={skuId:n.skuId,numbers:n.quantity};if(void 0!==n.packageId&&(i.packageId=n.packageId,i.packageList=n.packageStr),n.hasTheBinder&&n.theBinders&&n.theBinders.length){var a=[];n.theBinders.forEach(function(t){a.push({skuId:t.skuId,numbers:t.quantity})}),a&&(i.theBinder=a)}return n.presents&&(i.present_mark=1),i})},S=function(){var t=l.getSelected();return Object.keys(t).map(function(e){var n=t[e],i={skuId:n.skuId,quantity:n.quantity};if(void 0!==n.packageId&&(i.packageId=n.packageId,i.packageSkuIds=n.packageStr),n.hasTheBinder&&n.theBinders&&n.theBinders.length){var a=[];n.theBinders.forEach(function(t){t&&t.skuId&&a.push({skuId:t.skuId})}),a&&(i.theBinder=a)}return i})},$=function(){var t=a(window).height(),e=p.$merchantList.offset().top+p.$merchantList.height()+80,n=a(window).scrollTop();t+n<e?f.addClass(i):f.removeClass(i)},A=function(){o.show("#cart"),c.get(function(t,e){return t?(x=!1,o.hide("#cart"),I.show({content:t})):void a.ajax({url:"/check",type:"post",headers:{"X-CSRF-TOKEN":e},data:JSON.stringify(S()),contentType:"application/json",success:function(t){2e3===t.code&&t.data?a(m({param:T()})).appendTo("body").submit():401===t.code?r.doLogin():I.once("success",function(){window.location.reload(!0)}).show({hasClose:!1,content:"部分商品已失效或库存不足，请重新确认"}),o.hide("#cart")},error:function(){x=!1,o.hide("#cart"),I.show({content:"网络错误"})}})})},B=function(){l.on("update",function(t,e,n){var i=document.getElementById("cartSelectFee");n?_.removeAttr("disabled"):_.attr("disabled","disabled"),parseFloat(t)>0?i.classList.add("show"):i.classList.remove("show"),g.html(n),b.html(e),k.html(t)}),_.on("click",function(){var t=l.getTotalSelectedCount();t&&(x||(x=!0,A()))}),y.on("click",function(){var t=l.getSkus();t.length?w.show():I.show({content:"请选择您要删除的商品"})}),p.on("productCount",function(t){t?(v.html(t),$()):h.init()}),a(window).on("resize scroll",$)},z=function(){B()};t.exports={init:z}},10,function(t,e,n){var i=n(8),a=n(13),s=n(31).cartInterface,r=new a,o={},c={},d={},u=[],l=0,p=0,h=0,m=null,f=function(t,e,n){clearTimeout(m);var a=o[t];a?(a.theBinders=o[t].theBinders=e.theBinders,a.binderLength=o[t].binderLength=e.binderLength,a.quantity!==e.quantity&&(a.quantity=e.quantity)):a||(u.push(t),a=c[t]=o[t]=i.extend({},e),a._singlePrice=a.totalPrice,n||_(t,!0)),a._subtotal=a._singlePrice*a.quantity,a.theBinders&&a.theBinders.forEach(function(t){t.subtotal=t.price*t.quantity}),m=setTimeout(I,0)},v=[],g=[],b=null,k=null,y=5,_=function(t,e){if(clearTimeout(b),k&&(k.abort(),k=null),t)if(e){var n=g.indexOf(t);n!==-1?g.splice(n,1):v.indexOf(t)===-1&&v.push(t)}else{var i=v.indexOf(t);i!==-1?v.splice(i,1):g.indexOf(t)===-1&&g.push(t)}b=setTimeout(function(){var t=x(v,!0).concat(x(g,!1));t.length&&(k=s.select(t,function(t){return t?0===y?(y=5,!1):(y--,_()):(v=[],void(g=[]))}))},1e3)},x=function(t,e){return t.map(function(t){var n=c[t],i={id:n.cartItemId,skuId:n.skuId,selected:!!e};return void 0!==n.packageId&&(i.packageId=n.packageId,i.packageSkuIds=n.packageStr),i})},I=function(){return h=0,p=0,l=Object.keys(o).reduce(function(t,e){var n=o[e],i=0,a=n._discount.reduce(function(t,e){return t+e.price*n.quantity},0);return n.theBinders&&(i=n.theBinders.reduce(function(t,e){return t+e.subtotal},0)),h+=n.theBinders?n.quantity+n.theBinders.reduce(function(t,e){return t+e.quantity},0):n.quantity,p+=n.theBinders?a+n.theBinders.reduce(function(t,e){return t+e._discount.price*e.quantity},0):a,n._subtotal+i+t},0),d=S(o),r.emit("update",l.toFixed(2),p.toFixed(2),h),r.emit("moreBuyUpdate",d),l},w=function(t,e){o[t]&&(clearTimeout(m),e?(o[t].theBinders.forEach(function(n,i){n.skuId===e&&delete o[t].theBinders[i]}),_(t)):(delete o[t],_(t),u.splice(u.indexOf(t),1)),m=setTimeout(I,0))},T=function(){o={},u=[],I()},S=function(t){var e={};return Object.keys(t).forEach(function(n){var i=0,a=0,s=[],r=t[n].merchantId;i=t[n].theBinders?t[n]._subtotal+t[n].theBinders.reduce(function(t,e){return t+e.subtotal},0):t[n]._subtotal,e[r]&&(s=e[r].merchantData,a=e[r].totalPrice),s.push(t[n]),a+=parseFloat(i.toFixed(2)),e[r]={totalPrice:a,merchantData:s,merchantName:t[n].merchantName,merchantId:t[n].merchantId}}),e},$=function(){return JSON.parse(JSON.stringify(o))},A=function(t){var e=0;if(Object.keys(o).length){var n=S(o)[t];e=n?n.totalPrice:0}return e},B=function(){return u},z=function(){return h},C=function(){return{price:l.toFixed(2),discount:p.toFixed(2),count:h}};t.exports={add:f,del:w,clear:T,getTotal:C,getSkus:B,getSelected:$,getTotalSelectedCount:z,getPriceDepeMerchantId:A,on:r.on.bind(r)}},function(t,e,n){n(111);var i=n(8),a=n(12);n(67);var s=n(13),r=n(9),o=n(112),c=n(15),d=n(29),u=n(31).cartInterface,l=n(31).moreBuy,p=n(69),h=n(109),m="checked",f=new s,v=i("#merchantList"),g=i("#J-cartHearCtrl"),b=null,k=null,y=a.template(n(115),{variable:"data"}),_=a.template(n(116),{variable:"data"}),x=a.template(n(117),{variable:"binder"}),I=0,w=0,T=!1,S=!1,$={merchants:[],products:{},invalid:[],invalidSkuIds:[]},A=new r({type:"tips",title:"提示"}),B=new r({title:"删除",content:"您确定要删除该商品吗？",buttons:[{type:"cancel",text:"删除",callback:function(){this.__removeCallback()}},{type:"success",text:"取消",callback:function(){this.hide()}}]}),z=function(t){var e,n,a=this.merchantKey,s=this.data.uniqueId,r=t?t.binderData.skuId:null;void 0!==a?(e=$.merchants[a].productSkuIds,n=$.merchants[a].products):(e=$.invalidSkuIds,n=$.invalid),this.countdown&&this.countdown.stop();var o=e.indexOf(s);if(t?(this.checked&&h.del(s,r),delete $.products[s].data.theBinders[t.binderData.index],this.data.binderLength--):(e.splice(o,1),n.splice(o,1),this.checked&&h.del(s),delete $.products[s]),0===e.length)void 0!==this.merchantKey?$.merchants[a].$selector.remove():k.remove();else if(t){var c=this;this.$selector.each(function(e,n){n===t.binderData.$binderSelector[0]&&(this.remove(),c.$selector.splice(e,1))}),this.data.binderLength||i(".more-buy-skip",this.$selector).text("立即加购 >")}else this.$selector.remove();void 0!==a&&(O(a),M()),L()},C=function(t,e){var n=this,a=n.data.uniqueId,s=n.data.packageSkus;n.checked&&h.add(a,n.data),$.products[a].data.theBinders=n.data.theBinders,n.$selector=e,t.forEach(function(t){var e=i(".cart-col-ctrl",n.$selector).parent(".hasTheBinder");if(s&&s.length){var a=[".packChild",n.data.skuId].join("-"),r=[a,":eq(",s.length-1,")"].join("");e.nextAll(r).after(t)}else i(".cart-col-ctrl",n.$selector).parent(".hasTheBinder").after(t)}),n.data.theBinders.length&&(i(".more-buy-skip",this.$selector).text("重新换购 >"),i(".more-buy-skip",this.$selector).attr({"data-mdesc":"已享受加价优惠商品重新换购","data-bh":"click_store_cart_redem_change","data-mtype":"click_store_cart_redem_change"})),R(),L()},E=function(t){t?this.addClass(m):this.removeClass(m)},L=function(){I=Object.keys($.products).reduce(function(t,e){var n=$.products[e].data;return n.theBinders?t+n.quantity+n.theBinders.reduce(function(t,e){return t+e.quantity},0):t+n.quantity},0),f.emit("productCount",I)},q=function(t,e){clearTimeout(b);var n;void 0===e?(n=this.data.packagePrice?this.data.packagePrice+this.data.price:this.data.price,this.data.quantity=t,i(".main-goods",this.$selector).html((n*t).toFixed(2))):(this.data.theBinders[e].quantity=t,i(".child-goods-"+e,this.$selector).html((this.data.theBinders[e].price*t).toFixed(2))),this.checked&&h.add(this.data.uniqueId,this.data),b=setTimeout(L,600)},O=function(t){var e=$.merchants[t],n=e.products.reduce(function(t,e){return!!e.checked&&t},!0);e.checked=n;var a=i(".cart-select-all .mz-checkbox",e.$selector);E.call(a,n)},F=function(t,e){e.forEach(function(e){e.checked=t,t?h.add(e.data.uniqueId,e.data):h.del(e.data.uniqueId);var n=i(".mz-checkbox",e.$selector);E.call(n,t)})},N=function(t,e,n,a){var s=[],r=[],c=!0,m=t.map(function(t){if(t.merchantId=a,t.thisIndex=++n,t.merchantKey=e,t.packageId){var m=(t.packageSkus||[]).reduce(function(t,e){return t.push(e.skuId)&&t},[]);t.packageStr=m.join(","),t.uniqueId=t.skuId+"-"+t.packageId+"-"+m.join("-")}else t.packageStr=null,t.uniqueId=t.skuId;t._discount=[],t.packageDiscount&&t._discount.push({name:"套餐优惠",price:t.packageDiscount}),t.activity&&t._discount.push({name:"限时折扣优惠",price:t.originPrice-t.price}),t.hasTheBinder&&t.theBinders&&t.theBinders.length&&(t.binderLength=t.theBinders.length,t.theBinders.forEach(function(t){var e=(100*t.originPrice-100*t.price)/100;t._discount={name:"加价购",price:e}}));var f=i(_(t)),v=$.products[t.uniqueId]={$selector:f,merchantKey:e,data:t,checked:!!t.selected,adder:null};if(v.checked?h.add(t.uniqueId,t,!0):c=!1,I+=t.theBinders?t.quantity+t.theBinders.reduce(function(t,e){return t+e.quantity},0):t.quantity,void 0!==e){if(v.adder=(new o).on("update",function(){u.edit({id:t.cartItemId,skuId:t.skuId,quantity:t.quantity,packageId:t.packageId||null,packageSkuIds:t.packageStr||null})}).on("updateSync",function(t){i(".cart-product-number-max",f).removeClass("show"),q.apply(v,[t,void 0])}).init({num:t.quantity,max:t.maxBuy}).on("max",function(){i(".cart-product-number-max",f).html("限购"+t.maxBuy+"件").addClass("show")}),i(".cart-product-number-adder",f).append(v.adder.$ele),D(t,v,f),t.activity){var g=i('<p class="cart-product-disabled-countdown" />').appendTo(i(".cart-col-price",f));v.countdown=new d({step:1e3}).on("end",function(){S=!0}).on("count",function(t){g.text("限时特惠：剩余"+p(t).string)}).count(t.activity.endTime-w)}i(".mz-checkbox",f).on("click",function(){v.checked=!v.checked,v.checked?h.add(t.uniqueId,t):h.del(t.uniqueId),E.call(i(this),v.checked),O(e),M()}),i(".more-buy-skip",f).on("click",function(){var e=[];t.packageSkus&&t.packageSkus.forEach(function(t){e.push(t.skuId)}),l.init({itemId:t.itemId,skuId:t.skuId,quantity:t.quantity,packageId:t.packageId||null,packageSkuIds:e.join(","),cartItemId:t.cartItemId,refer:"cart"},function(e){var n=t.binderLength,i=Array.prototype.slice.call(f,0).length;f.each(function(t){t>i-n-1&&this.remove()}),f.splice(i-n,n),t.binderLength=e.length,t.theBinders=e;var a=D(t,v,f),s=a.$binders,r=a.$selector;C.call(v,s,r)})})}return f.on("click",".let-show",function(){P(t,v)}),r.push(t.uniqueId),s.push(v),f});return{endIndex:n,$products:m,productSkuIds:r,productsData:s,isCheckedAll:c}},P=function(t,e,n){B.__removeCallback=function(){var i=this,a=[];c.show(this.$dialog),n&&n.isBinder&&t.hasTheBinder&&(a=[{skuId:n.binderData.skuId}]),u.del([{id:t.cartItemId,skuId:t.skuId,packageId:t.packageId,packageSkuIds:t.packageStr,theBinder:a}],function(t){return t?(i.hide(),c.hide(i.$dialog),A.show({content:t})):(i.hide(),c.hide(i.$dialog),void z.call(e,n))})},B.show({content:"您确定要删除该商品吗？"})},D=function(t,e,n){if(t.hasTheBinder&&t.theBinders&&t.theBinders.length){var a=t.theBinders.map(function(a,s){a.index=s,a.merchantKey=e.merchantKey;var r=i(x(a));return n.push.apply(n,r),a.$binderSelector=r,e.adder=null,e.adder=(new o).on("update",function(){u.edit({id:t.cartItemId,skuId:t.skuId,packageId:t.packageId,packageSkuIds:t.packageStr,theBinder:[{skuId:a.skuId,quantity:a.quantity}]})}).on("updateSync",function(t){var n=a.shortageNum&&a.shortageNum>0;n?i(".max-binder-"+s,r).html("库存紧张").addClass("show red"):i(".max-binder-"+s,r).removeClass("show red"),q.apply(e,[t,s])}).init({num:a.quantity,max:a.maxBuy}).on("max",function(){i(".max-binder-"+s,r).html("限购"+a.maxBuy+"件").addClass("show").removeClass("red")}),i(".adder-binder-"+s,r).append(e.adder.$ele),r.on("click",".binder-let-show",function(){P(t,e,{isBinder:!0,binderData:a})}),r});return{$binders:a,$selector:n}}},j=function(t){if(!t.length)return[];k=i(y({invalid:!0}));var e=N(t,void 0,0);return $.invalid=e.productsData,$.invalidSkuIds=e.productSkuIds,i(".cart-invalid-delete",k).on("click",function(){B.__removeCallback=function(){var t=this;c.show(this.$dialog),u.del($.invalid.map(function(t){var e=[];return t.data.hasTheBinder&&t.data.theBinders.forEach(function(t){e.push({skuId:t.skuId})}),{id:t.data.cartItemId,skuId:t.data.skuId,packageId:t.data.packageId,packageSkuIds:t.data.packageStr,theBinder:e}}),function(e){return e?(t.hide(),c.hide(t.$dialog),A.show({content:e})):(k.remove(),$.invalidSkuIds.forEach(function(t){delete $.products[t]}),$.invalid=[],$.invalidSkuIds=[],L(),c.hide(t.$dialog),void t.hide())})},B.show({content:"您确定要删除这些商品吗？"})}),i(".cart-merchant-body",k).append(e.$products),k},U=function(t,e){var n=!0,a=0,s=t.expressFee.cost,r=e.map(function(e,r){var o=N(e.mainSkus,r,a,e.merchantId);if(e.selected=o.isCheckedAll,a=o.endIndex,t.expressFee&&e.selfSupport){var c=h.getPriceDepeMerchantId(e.merchantId),d=s-c;e.supportShip=!0,d>0&&(e.supportShip=!1,e.feePrice=d.toFixed(2),e.selectPriceOfFee=c.toFixed(2))}var u=i(y(e)),l={$selector:u,key:r,checked:o.isCheckedAll,data:e,productSkuIds:o.productSkuIds,products:o.productsData};return o.isCheckedAll||(n=!1),i(".cart-merchant-body",u).append(o.$products),i(".cart-select-all",u).on("click",function(){var t=i(".mz-checkbox",this);l.checked=!l.checked,E.call(t,l.checked),F(l.checked,o.productsData),M()}),$.merchants.push(l),e.merchantId<1e4&&h.on("moreBuyUpdate",function(t){var n=0;t[e.merchantId]&&(n=t[e.merchantId].totalPrice);var a=s-n;a>0?(e.supportShip=!1,e.feePrice=a.toFixed(2),e.selectPriceOfFee=n.toFixed(2),i(".cart-select-fee",u).addClass("unFreeShipping"),i(".cart-shipping-price",u).html(e.feePrice)):i(".cart-select-fee").removeClass("unFreeShipping")}),i(".fee-shipping-skip",u).on("click",function(){window.open("//lists.meizu.com/page/exempt?total="+e.selectPriceOfFee+"&need="+e.feePrice)}),u});return T=!!e.length&&n,r},K=function(){return T=!T,$.merchants.forEach(function(t){var e=i(".cart-select-all .mz-checkbox",t.$selector);t.checked=T,E.call(e,t.checked),F(t.checked,t.products)}),T},J=function(){g.toggleClass("show"),$.merchants.forEach(function(t){i(".cart-product-remove",t.$selector).toggleClass("let-show"),i(".cart-product-remove-binder",t.$selector).toggleClass("binder-let-show")}),g.hasClass("show")?g.text("完成"):g.text("编辑")},R=function(){g.removeClass("show"),g.text("编辑"),$.merchants.forEach(function(t){i(".cart-product-remove",t.$selector).removeClass("let-show"),i(".cart-product-remove-binder",t.$selector).removeClass("binder-let-show")})},M=function(){T=$.merchants.reduce(function(t,e){return!!e.checked&&t},!0),f.emit("selectedAll",T)},H=function(){return I},V=function(){return S},Q=function(t){t.forEach(function(t){z.call($.products[t])})},G=function(t,e){w=e,v.append(U(t,t.merchants),j(t.invalids)),i("[data-original]",v).lazyload(),f.emit("productCount",I),f.emit("selectedAll",T)};t.exports={init:G,selectAll:K,editShowAll:J,$merchantList:v,getProductCount:H,getIsPriceOverTime:V,removeSelected:Q,on:f.on.bind(f)}},10,function(t,e,n){n(113);var i=n(8),a=n(12),s=n(13),r=function(){return this._events={},s.apply(this,arguments),arguments.length>0?this.init.apply(this,arguments):this};r.prototype=new s,r.prototype.constructor=r,r.prototype._defaultOptions={min:1,num:1,max:500,callTime:600},r.prototype._template=a.template(n(114)),r.prototype.init=function(t){return this.options=i.extend(!0,{},this._defaultOptions,t),this.$ele=i(this._template({num:this.options.num})),this.$input=this.$ele.find(".mz-adder-input"),this._disSub=!1,this._disAdd=!1,this._speeding=!1,this._numberEmitTimeout=null,this._keyTimeInterval=null,this._rollbackVal=this.options.num,this.on("min",function(){this._disSub=!0,i(".mz-adder-subtract",this.$ele).addClass("disabled")}),this.on("max",function(){this._disAdd=!0,i(".mz-adder-add",this.$ele).addClass("disabled")}),this.on("updateSync",function(t){this._rollbackVal=t,i(".mz-adder-input",this.$ele).val(t),t>this.options.min&&(this._disSub=!1,i(".mz-adder-subtract",this.$ele).removeClass("disabled")),t<this.options.max&&(this._disAdd=!1,i(".mz-adder-add",this.$ele).removeClass("disabled"));
}),this.options.num===this.options.min&&this.emit("min"),this.options.num===this.options.max&&this.emit("max"),this._bind(),this},r.prototype.addSpeeder=function(t){this._speeding=!0,this._keyTimeInterval=setTimeout(function(t){clearTimeout(this._numberEmitTimeout),this.options.num<this.options.max&&(this.options.num++,this.$input.val(this.options.num)),this.addSpeeder.call(this,t>0?t-8:0)}.bind(this,t),t)},r.prototype.subSpeeder=function(t){this._speeding=!0,this._keyTimeInterval=setTimeout(function(t){clearTimeout(this._numberEmitTimeout),this.options.num>this.options.min&&(this.options.num--,this.$input.val(this.options.num)),this.subSpeeder.call(this,t>0?t-8:0)}.bind(this,t),t)},r.prototype._bind=function(){var t=this;this.$ele.on("click",".mz-adder-subtract",function(){t._disSub||(t._speeding=!1,t._disAdd=!1,clearTimeout(t._keyTimeInterval),clearTimeout(t._numberEmitTimeout),t.options.num>t.options.min&&t.options.num--,t._numberEmitTimeout=setTimeout(function(){t.emit("update",t.options.num)},t.options.callTime),t.emit("updateSync",t.options.num),t.options.num===t.options.min&&t.emit("min"))}),this.$ele.on("mousedown",".mz-adder-subtract",function(){t._disSub||(t._disAdd=!1,t.subSpeeder.call(t,200))}),this.$ele.on("click",".mz-adder-add",function(){t._disAdd||(t._disSub=!1,t._speeding=!1,clearTimeout(t._keyTimeInterval),clearTimeout(t._numberEmitTimeout),t.options.num<t.options.max&&t.options.num++,t._numberEmitTimeout=setTimeout(function(){t.emit("update",t.options.num)},t.options.callTime),t.emit("updateSync",t.options.num),t.options.num===t.options.max&&t.emit("max"))}),this.$ele.on("mousemove",function(){t._speeding&&(t._speeding=!1,clearTimeout(t._numberEmitTimeout),clearTimeout(t._keyTimeInterval),t._numberEmitTimeout=setTimeout(function(){t.emit("update",t.options.num)},t.options.callTime),t.emit("updateSync",t.options.num),t.options.num===t.options.max&&t.emit("max"),t.options.num===t.options.min&&t.emit("min"))}),this.$ele.on("mousedown",".mz-adder-add",function(){t._disAdd||(t._disSub=!1,t.addSpeeder.call(t,200))});var e=null;this.$input.on("keypress",function(){clearTimeout(e);var n=i(this).val();/^\d+$/.test(n)&&n>=t.options.min&&n<=t.options.max&&(t._rollbackVal=parseInt(n,10))}),this.$input.on("input blur",function(){clearTimeout(e),clearTimeout(t._numberEmitTimeout),e=setTimeout(t.inputEvent.bind(this,t),300)}),this.$input.on("keyup",function(n){[37,38,39,40].indexOf(n.keyCode)===-1&&(clearTimeout(e),clearTimeout(t._numberEmitTimeout),e=setTimeout(t.inputEvent.bind(this,t),300))})},r.prototype.inputEvent=function(t){var e=i(this).val();return/^\d+$/.test(e)?void(e<t.options.max&&e>t.options.min?(t.options.num=parseInt(e,10),t._numberEmitTimeout=setTimeout(function(){t.emit("update",t.options.num)},t.options.callTime),t.emit("updateSync",t.options.num)):(t.options.num=e>=t.options.max?t.options.max:t.options.min,t._numberEmitTimeout=setTimeout(function(){t.emit("update",t.options.num)},t.options.callTime),t.emit("updateSync",t.options.num),t.emit(e>=t.options.max?"max":"min"))):(t.options.num=t._rollbackVal,t._numberEmitTimeout=setTimeout(function(){t.emit("update",t.options.num)},t.options.callTime),t.emit("updateSync",t.options.num),t.options.num===t.options.min&&t.emit("min"),t.options.num===t.options.max&&t.emit("max"),!1)},r.prototype.getNum=function(){return this.options.num},r.prototype.setNum=function(t){var e=this;if(!/^\d+$/.test(t))throw new TypeError("num必须是数值");return t<=this.options.max&&t>=this.options.min&&(this.$input.val(this.options.num=parseInt(t,10)),this._numberEmitTimeout=setTimeout(function(){e.emit("update",e.options.num)},this.options.callTime),this.emit("updateSync",this.options.num)),this},r.prototype.setMax=function(t){if(!/^\d+$/.test(t))throw new TypeError("num必须是数值");return this.options.max=t,this},r.prototype.setMin=function(t){if(!/^\d+$/.test(t))throw new TypeError("num必须是数值");return this.options.min=t,this},t.exports=r},10,function(t,e){t.exports='<div class="mz-adder">\n  <button class="mz-adder-subtract"></button>\n  <div class="mz-adder-num"><input type="text" class="mz-adder-input" value="<%= num %>"></div>\n  <button class="mz-adder-add"></button>\n</div>\n'},function(t,e){t.exports='<li class="cart-merchant<%= data.invalid ? \' disabled\' : \'\' %>">\n  <div class="cart-merchant-header">\n    <% if (data.invalid) { %>\n    失效商品\n    <div class="cart-invalid-delete" data-mdesc="删除全部失效商品" data-mtype="store_cart_invalid">全部删除</div>\n    <% } else { %>\n    <div class="cart-select-all">\n      <div class="mz-checkbox<%= data.selected ? \' checked\' : \'\' %>"></div>\n      <span class="cart-select-title"><%= data.merchantName %></span>\n    </div>\n    <% if (data.selfSupport) { %>\n    <div class="cart-select-fee <%= data.supportShip ? \'\' : \'unFreeShipping\' %>" id="cartSelectFee">\n      <span class="cart-free">已免运费</span>\n      <div>\n        <p>再买<span class="cart-shipping-price"><%= data.feePrice %></span>元，即可免运费 </p>\n        <span class="fee-shipping-skip" data-mdesc="满包邮活动" data-mtype="store_cart_postage">立即凑单 ></span>\n      </div>\n    </div>\n    <% }} %>\n  </div>\n  <table class="cart-merchant-body"></table>\n</li>\n'},function(t,e){t.exports='\n<!-- 加价购 Start -->\n<% if (data.hasTheBinder && data.merchantKey !== undefined) { %>\n  <tr class="cart-more-buy">\n    <td class="cart-product-buy" colspan="5">\n      <div class="more-buy-tag">\n        <span>加价购</span>\n      </div>\n      <span class="more-buy-tips">另加<%= data.theBinderLowestPrice %>元起，即可换购超值商品</span>\n      <span class="more-buy-skip" data-mdesc="<%= data.binderLength ? \'已享受加价优惠商品重新换购\' : \'换购超值商品\' %>" data-mtype="click_<%= data.binderLength ? \'click_store_cart_redem_change\' : \'click_store_cart_redem_choose\' %>" data-bh="click_<%= data.binderLength ? \'click_store_cart_redem_change\' : \'click_store_cart_redem_choose\' %>"><%= data.binderLength ? \'重新换购\' : \'立即加购\' %> ></span>\n    </td>\n  </tr>\n  <% } %>\n\n  <tr class="cart-product <%= data.hasTheBinder ? \'hasTheBinder\' : \'\' %>" >\n    <td class="cart-col-select"</td>\n      <% if (data.merchantKey !== undefined) { %>\n      <div class="mz-checkbox<%= data.selected ? \' checked\' : \'\' %>"></div>\n      <% } else { %>\n      <span class="cart-product-disabled-label">失效</span>\n      <% } %>\n      <a href="<%= data.itemUrl %>" class="cart-product-link" target="_blank" data-mdesc="购物车商品位" data-mtype="click_store_cart_prod" data-bh="click_store_cart_prod">\n        <img data-original="<%= data.image %>@120x120.png" class="cart-product-img" alt="<%= data.itemName %>">\n      </a>\n      <a href="<%= data.itemUrl %>" class="cart-product-link cart-product-info" target="_blank" data-mdesc="购物车商品位" data-mtype="click_store_cart_prod" data-bh="click_store_cart_prod">\n        <p class="cart-product-item-name"><%= data.itemName %></p>\n        <% if (data.packageName) { %>\n        <p class="cart-product-package-name"><%= data.packageName %></p>\n        <% } %>\n        <p class="cart-product-desc"><%= data.cspuDesc %></p>\n      </a>\n    </td>\n    <td class="cart-col-price">\n      <p>\n        <span class="cart-product-price"><%= data.totalPrice.toFixed(2) %></span>\n        <% if (data.totalOriginPrice > data.totalPrice) { %>\n        <span class="cart-product-price origin"><%= data.totalOriginPrice.toFixed(2) %></span>\n        <% } %>\n      </p>\n      <% if (data._discount.length) { %>\n      <div class="cart-product-discount<%= data._discount.length > 1 ? \' child\' : \'\' %>">\n        <span class="cart-product-discount-title">\n          <%= data._discount.length > 1 ? \'优惠\' : data._discount[0].name %>:\n          <span class="cart-product-price sub">\n            <%= (data._discount.length > 1 ? data._discount.reduce(function(p,a){ return p + a.price }, 0) : data._discount[0].price).toFixed(2) %>\n          </span>\n          <% if(data._discount.length > 1) { %>\n          <i class="cart-product-discount-triangle"></i>\n          <% } %>\n        </span>\n        <% if (data._discount.length > 1) { %>\n        <ul class="cart-product-discount-list">\n          <% data._discount.forEach(function (discount) { %>\n          <li class="cart-product-discount-item">\n            <%= discount.name %>\n            <span class="cart-product-price sub"><%= discount.price.toFixed(2) %></span>\n          </li>\n          <% }) %>\n        </ul>\n        <% } %>\n      </div>\n      <% } %>\n    </td>\n    <td class="cart-col-number">\n      <% if (data.merchantKey === undefined) { %>\n      <%= data.quantity %>\n      <% } else { %>\n      <div class="cart-product-number-adder">\n        <p class="cart-product-number-max show">\n          <% if (data.shortageNum && data.shortageNum > 0)  { %>\n            <span class="cart-product-number-red">库存紧张</span>\n          <% } else if (data.quantity == data.maxBuy) { %>\n            限购<%= data.maxBuy %>件\n          <% } %>\n        </p>\n      </div>\n      <% } %>\n    </td>\n    <td class="cart-col-total">\n      <span class="cart-product-price total main-goods"><%= data.subtotal.toFixed(2) %></span>\n    </td>\n    <td class="cart-col-ctrl"><div class="cart-product-remove <%= data.merchantKey !== undefined ? \'\' : \'let-show\'  %>" data-mdesc="删除单个商品按钮" data-mtype="click_store_cart_del" data-bh="click_store_cart_del"></div></td>\n  </tr>\n\n  <!-- 套餐 start -->\n  <% if (data.packageSkus) { %>\n  <% data.packageSkus.forEach(function (child) { %>\n  <tr class="cart-product child packChild-<%= data.skuId %>">\n    <td class="cart-col-select cart-product-package" colspan="5">\n      <div class="mz-checkbox" style="visibility: hidden;"></div>\n      <a href="<%= child.itemUrl %>" class="cart-product-link" target="_blank" data-mdesc="购物车商品位" data-mtype="click_store_cart_prod" data-bh="click_store_cart_prod">\n        <img data-original="<%= child.image %>@120x120.png" class="cart-product-img" alt="">\n      </a>\n      <a href="<%= child.itemUrl %>" class="cart-product-link" target="_blank" data-mdesc="购物车商品位" data-mtype="click_store_cart_prod" data-bh="click_store_cart_prod">\n        <%= child.itemName %> <%= child.cspuDesc %>\n      </a>\n    </td>\n  </tr>\n  <% }) %>\n  <% } %>\n  <!-- 套餐 end -->\n\n  <!-- 赠品 start -->\n  <% if (data.presents) { %>\n  <% data.presents.forEach(function (present) { %>\n  <tr class="cart-product child">\n    <td class="cart-col-select cart-product-present">\n      <div class="mz-checkbox" style="visibility: hidden;"></div>\n      <a href="<%= present.itemUrl %>" class="cart-product-link">\n        <img class="cart-product-img"  class="cart-product-present-img" data-original="<%= present.image %>@120x120.png" alt="">\n      </a>\n      <a href="<%= present.itemUrl %>" class="cart-product-link cart-product-present-name">\n        【赠品】<%= present.showName %>\n      </a>\n    </td>\n    <td class="cart-col-price">\n      <p>\n        <span class="cart-product-price">0.00</span>\n      </p>\n    </td>\n    <td colspan="3">\n    </td>\n  </tr>\n  <% }) %>\n  <% } %>\n  <!-- 赠品 end -->\n'},function(t,e){t.exports='<tr class="cart-product child binder-<%= binder.skuId %>">\n  <td class="cart-col-select">\n    <div class="mz-checkbox" style="visibility: hidden;"></div>\n    <a href="<%= binder.itemUrl %>" class="cart-product-link" target="_blank">\n      <img src="<%= binder.image %>@120x120.png" class="cart-product-img" alt="">\n    </a>\n    <a href="<%= binder.itemUrl %>" class="cart-product-link cart-product-info" target="_blank">\n      <p class="cart-product-item-name"><%= binder.itemName %></p>\n      <% if (binder.packageName) { %>\n      <p class="cart-product-package-name"><%= binder.packageName %></p>\n      <% } %>\n      <p class="cart-product-desc"><%= binder.cspuDesc %></p>\n    </a>\n  </td>\n  <td class="cart-col-price">\n    <p>\n      <span class="cart-product-price"><%= binder.price %></span>\n      <% if (binder.originPrice > binder.price) { %>\n      <span class="cart-product-price origin"><%= binder.originPrice %></span>\n      <% } %>\n    </p>\n\n    <div class="cart-product-discount">\n      <span class="cart-product-discount-title">\n        <%= binder._discount.name %>:\n        <span class="cart-product-price sub">\n        <%= binder._discount.price.toFixed(2) %>\n        </span>\n      </span>\n    </div>\n  </td>\n  <td class="cart-col-number">\n    <% if (binder.merchantKey === undefined) { %>\n    <%= binder.quantity %>\n    <% } else { %>\n    <div class="cart-product-number-adder-binder adder-binder-<%= binder.index %>">\n      <p class="cart-product-number-max-binder max-binder-<%= binder.index %> show">\n        <% if (binder.shortageNum && binder.shortageNum > 0)  { %>\n        <span class="cart-product-number-red">库存紧张</span>\n        <% } else if (binder.quantity == binder.maxBuy) { %>\n          限购<%= binder.maxBuy %>件\n        <% } %>\n      </p>\n    </div>\n    <% } %>\n  </td>\n  <td class="cart-col-total">\n    <span class="cart-product-price total child-goods-<%= binder.index %>"><%= binder.subtotal.toFixed(2) %></span>\n  </td>\n  <td class="cart-col-ctrl"><div class="cart-product-remove-binder <%= binder.merchantKey !== undefined ? \'\' : \'binder-let-show\'  %>" data-mdesc="删除加价购商品按钮" data-mtype="click_store_cart_del" data-bh="click_store_cart_del"></div></td>\n</tr>\n'},function(t,e,n){n(119);var i=n(8),a=n(12),s=n(31).login,r=i("#cart"),o=a.template(n(122),{variable:"data"}),c=function(){r.html(o({login:s.isLogin}))};t.exports={init:c}},10,,,function(t,e){t.exports='<div class="mzcontainer">\n  <div class="cart-empty <%= data.login ? \' login\' : \'\' %>">\n    <div class="cart-empty-content">\n      <div class="cart-empty-left"></div>\n      <div class="cart-empty-right">\n        <div class="cart-empty-title">\n          <% if (data.login) { %>\n          购物车内还没有商品，赶紧去选购吧~\n          <% } else { %>\n          您还没有登录！\n          <% } %>\n        </div>\n        <% if (!data.login) { %>\n        <div class="cart-empty-desc">登录后可显示您账号中已加入的商品哦~</div>\n        <% } %>\n        <div class="tips-btn">\n          <% if (data.login) { %>\n          <a class="mz-btn primary" href="//store.meizu.com/index.html" data-mdesc="已登录且购物车为空返回商城首页按钮\t" data-mtype="click_store_cart_empty_index" data-bh="click_store_cart_empty_index">返回商城首页</a>\n          <% } else { %>\n          <a class="mz-btn success l" href="javascript:window.location.href=\'https://login.flyme.cn/vCodeLogin?sid=unionlogin&service=store&autodirct=true&useruri=http://store.meizu.com/member/login.htm?useruri=\'+ encodeURIComponent(encodeURIComponent(window.location.href));" data-mdesc="未登录且购物车为空时提示用户登录" data-mtype="click_store_cart_empty_login" data-bh="click_store_cart_empty_login">去登录</a>\n          <% } %>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'},function(t,e){t.exports='<form action="//ordercenter.meizu.com/order/add.html" method="post" style="display: none">\n  <input type="hidden" value="<%- JSON.stringify(data.param) %>" name="cart_param">\n  <input type="hidden" value="cart" name="buy_from">\n</form>\n'},function(t,e,n){n(125);var i=n(8),a=i("#cartLoginTips"),s=n(31).login;s.isLogin||(a.addClass("show"),a.on("click",".mz-btn",function(){s.doLogin()}),a.on("click","#closeTips",function(){a.removeClass("show")}))},10]));
!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="//store.res.meizu.com/order/",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var i=t.slice(1),n=e[t[0]];return function(e,t,o){n.apply(this,[e,t,o].concat(i))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,i){i(1),i(7);var n=i(8),o=i(9),s=i(15),r=i(19),a=i(30)(),c=i(31).magnet,d=i(32),l=i(54),u=i(64),p=i(80),h=i(102),v=i(33),f=n.extend(!0,{},window.globalData.data),m=n("#validCode"),g=n("#submitForm"),y=n("#totalTips"),b=n("#orderStockTips"),x=!1,k=new o({title:"提示",type:"tips"}),w=null;f.codeRule.display&&(w=new r({selector:m,len:f.codeRule.len,type:f.codeRule.type,sid:f.codeRule.verifySid}).on("click",function(){this.$element.css("width",318)}).on("hide",function(){this.$element.css("width",210)}),w.$element.attr({"data-mdesc":"验证码","data-bh":"click_store_se_code","data-mtype":"click_store_se_code"}));var C=function(){if(x)return!1;x=!0;var e=u.getCountEndProd(),t=new o({type:"tips",title:"提示",buttons:[{type:"success",text:"上一步",callback:function(){window.location.replace(f.refererUrl)}}]});if(e.length)return t.show({content:e.join(",")+"的价格已发生变化，请重新下单！"}),x=!1,!1;var i=l.getActiveAddressId();if(null===i)return k.show({content:"请选择收货人地址"}),x=!1,!1;if(f.codeRule.display&&!w.getValidateState())return y.text("请先通过安全验证"),x=!1,!1;y.empty();var n=f.codeRule.display?w.getValidateCode():"";_(i,n)},_=function(e,t){var i=u.getProductPointer(),o=Object.keys(i).sort(function(e,t){return i[e].index-i[t].index}).map(function(e){var t=i[e],o={invoiceType:t.invoiceType};return"mosale"===f.buyFrom?n.extend(o,h.getInvoiceData()):t.invoiceType&&(o.invoiceOrg=t.invoiceOrg,o.invoiceTitle=t.invoiceTitle,2===o.invoiceType&&"03"===o.invoiceOrg&&(o.invoiceTitle=l.getAddressObjectById().receiver),"01"===t.invoiceOrg&&(o.invoiceIdentifySn=t.invoiceIdentifySn,o.invoiceBank=t.invoiceBank,o.invoiceBankAccount=t.invoiceBankAccount)),t.remark&&(o.remark=t.remark),o.orderItems=Object.keys(t.skus).sort(function(e,i){return t.skus[e].index-t.skus[i].index}).map(function(e){var i=t.skus[e],n={skuId:i.skuId,numbers:i.number,theBinder:i.theBinder};return 1===i.presentMark&&(n.presentMark=i.presentMark),i.packageId&&(n.packageId=i.packageId,n.packageList=i.packageList),n}),o}),s={buyFrom:f.buyFrom,mcode:f.mcode,sourceTime:f.sourceTime,validCode:t,addressId:e,skillTicket:f.skillTicket,payMethodSupport:"1",useMcycle:p.repo.getRepoUseState()?1:0,buyInfos:JSON.stringify(o)},r=p.coupon.getUseCouponId();r&&(s.couponAcquirementId=r);var a=p.red.getUseRedId();a&&(s.redEnvelopeAcquirementId=a);var c=p.gift.getUseGiftNumAndId().useGiftId,d=p.gift.getUseGiftNumAndId().userGiftPwd;return c&&d&&(s.giftCardId=c,s.giftCardPwd=d),n.extend(s,v.getPayType()),I(s)},I=function(e){a.get(function(t,i){return t?(k.show({content:t}),void(x=!1)):void n.ajax({url:"/order/submit.html",data:e,headers:{"X-CSRF-TOKEN":i},type:"post",timeout:1e4,beforeSend:s.show.bind(null,"body"),success:function(e){s.hide(),x=!1,200===e.code?v.isWechatPay()?v.handlePay(e.data.url,e.data.timeout,e.data.token):(n(window).off("beforeunload",A),window.location.replace(e.data.url)):e.code>6e3?k.on("hide",function(){n(window).off("beforeunload",A),window.location.replace(e.data.url)}).show({content:e.message}):4e3===e.code?k.once("hide",function(){switch(f.codeRule.display&&w.reset(),e.data.failCouponType){case 1:p.repo.clearRepo();break;case 2:p.coupon.clearCoupon();break;case 3:p.red.clearRed();break;case 4:p.gift.clearGift()}}).show({content:e.message}):(f.codeRule.display&&w.reset(),k.show({content:e.message||e.msg}))},error:function(){s.hide(),k.show({content:"网络错误"}),x=!1}})})},A=function(e){var t="您确定要离开吗？";try{var i=e||window.event;i.returnValue=t}catch(n){}return t},$=function(){l.event.on("selectAddress",P),g.on("click",C),n(window).on("beforeunload",A),v.on("success",function(e){n(window).off("beforeunload",A),window.location.replace(e)})},T=function(e){Object.keys(e).forEach(function(t){e[t].$arrival=n(u.setArrival({fastArrivalStatus:0})).replaceAll(e[t].$arrival)})},P=function(e){if(u.getSupportFastArrival()){var t=u.getProductPointer();a.get(function(i,o){n.ajax({url:"/order/check_fast_arrival",headers:{"X-CSRF-TOKEN":o},data:{skus:f.skus,provinceId:e.provinceId,cityId:e.cityId,areaId:e.areaId,townId:e.townId},type:"post",timeout:1e4,beforeSend:s.show.bind(null,l.$addressModule),success:function(e){200===e.code?Object.keys(e.data).forEach(function(i){t[i].$arrival=n(u.setArrival(e.data[i])).replaceAll(t[i].$arrival)}):T(t),s.hide(l.$addressModule)},error:function(){T(t),s.hide(l.$addressModule)}})})}};d.init(f),l.init(f.address),u.init(f.buyInfoList,f.sysTime,f.buyFrom),v.init(f.huabeis,f.sourceTime,f.huabeiLimit,f.scene),"mosale"===f.buyFrom?h.businessInvoiceInit():p.init(f),2!==f.buyInfoList[0].skuInfo[0].type&&b.show(),$(),c.init({cart:!1})},function(e,t){},,,,,,1,function(e,t){e.exports=meizuStoreGlobal.jquery},function(e,t,i){i(10);var n=i(8),o=i(12),s=i(13),r="hide",a=function(){return this._events={},s.apply(this,arguments),arguments.length?this.init.apply(this,arguments):this};a.prototype=new s,a.prototype.constructor=a,a.prototype._template=o.template(i(14),{variable:"data"}),a.prototype.defaultOptions={type:"dialog",hasClose:!0,title:"",content:"",contentTitle:"",buttons:[]},a.prototype.init=function(e){var t=this,i={};return i.buttons=[{type:"success",text:"确定",callback:function(){var e=!0;t.emit("beforeSuccess",function(){e=!1}),e&&(t.hide(),t.emit("success"))}}],"tips"!==e.type&&i.buttons.push({type:"cancel",text:"取消",callback:function(){var e=!0;t.emit("beforeCancel",function(){e=!1}),e&&(t.hide(),t.emit("cancel"))}}),this.options=n.extend({},this.defaultOptions,i,e),this.$dialog=n(this._template(this.options)).appendTo("body"),n(".mz-dialog-content",this.$dialog).append(this.options.content),n(".mz-dialog-bottom .mz-btn",this.$dialog).on("click",function(){var e=n(this).index(),i=t.options.buttons[e].callback;n.isFunction(i)&&i.call(t)}),this.options.hasClose&&n(".mz-dialog-close",this.$dialog).on("click",function(){var e=!0;t.emit("beforeClose",function(){e=!1}),e&&(t.hide(),t.emit("close"))}),this._init=!0,this},a.prototype._initDom=function(){return this},a.prototype.show=function(e,t){if(!this._init)return this.init(e).show(e,!0);if(e&&!t&&((e.type||e.className)&&n(".mz-dialog",this.$dialog).attr("class","mz-dialog").addClass((e.type||"")+" "+(e.className||"")),void 0!==e.hasClose&&(e.hasClose?n(".mz-dialog-close",this.$dialog).removeClass(r):n(".mz-dialog-close",this.$dialog).addClass(r)),void 0!==e.title&&n(".mz-dialog-title",this.$dialog).text(e.title),void 0!==e.content&&n(".mz-dialog-content",this.$dialog).empty().append(e.content),void 0!==e.contentTitle&&n(".mz-dialog-content-title",this.$dialog).text(e.contentTitle),n.isArray(e.buttons))){var i=e.buttons.map(function(e){if(!n.isFunction(e.callback))throw new TypeError("Callback must be a function.");return n('<div class="mz-btn '+e.type+'">'+e.text+"</div>").on("click",e.callback.bind(this))});n(".mz-dialog-bottom",this.$dialog).empty().append(i)}var o=!0;return this.emit("beforeShow",function(){o=!1}),o&&(this.$dialog.removeClass(r),this.emit("show")),this},a.prototype.setPosition=function(){var e=n(".mz-dialog",this.$dialog),t=e.outerHeight(),i=e.outerWidth();e.css({marginLeft:-(i/2),marginTop:-(t/2)})},a.prototype.hide=function(){var e=!0;return this.emit("beforeHide",function(){e=!1}),e&&(this.emit("hide"),this.$dialog.addClass(r)),this},a.prototype.destroy=function(){var e=!0;return this.emit("beforeDestroy",function(){e=!1}),e&&(this.emit("destroy"),this.$dialog.remove(),this._init=!1),this},e.exports=a},1,,function(e,t){e.exports=meizuStoreGlobal.underscore},function(e,t){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function r(e){return void 0===e}e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!o(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,o,a,c,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(i=this._events[e],r(i))return!1;if(n(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(s(i))for(a=Array.prototype.slice.call(arguments,1),d=i.slice(),o=d.length,c=0;c<o;c++)d[c].apply(this,a);return!0},i.prototype.addListener=function(e,t){var o;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned&&(o=r(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,o&&o>0&&this._events[e].length>o&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function i(){this.removeListener(e,i),o||(o=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var o=!1;return i.listener=t,this.on(e,i),this},i.prototype.removeListener=function(e,t){var i,o,r,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],r=i.length,o=-1,i===t||n(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(i)){for(a=r;a-- >0;)if(i[a]===t||i[a].listener&&i[a].listener===t){o=a;break}if(o<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],n(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},i.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){e.exports='<div class="mz-mask hide">\n  <div class="mz-dialog <%= data.type %> <%= data.className %>">\n    <div class="mz-dialog-header">\n      <div class="mz-dialog-title"><%= data.title %></div>\n      <div class="mz-dialog-close<%= data.hasClose ? \'\' : \' hide\' %>"></div>\n    </div>\n    <div class="mz-dialog-main">\n      <div class="mz-dialog-warp">\n        <% if (data.contentTitle) { %>\n        <div class="mz-dialog-content-title"><%= data.contentTitle %></div>\n        <% } %>\n        <div class="mz-dialog-content"></div>\n      </div>\n    </div>\n    <% if (data.buttons) { %>\n    <div class="mz-dialog-bottom">\n      <% data.buttons.forEach(function(btn) { %>\n      <div class="mz-btn <%= btn.type %>"><%= btn.text %></div>\n      <% }) %>\n    </div>\n    <% } %>\n  </div>\n</div>\n'},function(e,t,i){i(16);var n=i(8),o=i(18)("animation"),s='<div class="mz-loading-mask" />',r='<div class="mz-loading" />',a=['<div class="mz-bounce mz-bounce1"></div>','<div class="mz-bounce mz-bounce2"></div>','<div class="mz-bounce mz-bounce3"></div>'].join(""),c=function(e){var t=n(e||"body");"static"===t.css("position")&&"body"!==t.selector&&t.css("position","relative");var i=!1,c=t.children(".mz-loading-mask");c.length||(c=n(s),i=!0);var d=t.outerHeight(),l=t.outerWidth();if(c.css({width:l,height:d}),!i)return c.show();var u;return u=o?n(r).addClass("spinner").append(a):n(r).addClass("image"),c.append(u).appendTo(t)},d=function(e){var t=n(e||"body"),i=t.children(".mz-loading-mask");return!!i.length&&i.hide()};e.exports={show:c,hide:d}},1,,function(e,t){e.exports=function(e){var t,i=["webkit","Moz","ms","o"],n=[],o=document.documentElement.style,s=function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})};for(t=0;t<i.length;t++)n.push(s(i[t]+"-"+e));for(n.push(s(e)),t=0;t<n.length;t++)if(n[t]in o)return!0;return!1}},function(e,t,i){i(20);var n=i(8),o=i(22),s=i(13),r=i(29),a=i(15),c=function(){return this._events={},s.apply(this,arguments),this.getImgCount=new r,this.validatedCount=new r,arguments.length>0?this.init.apply(this,arguments):this};c.prototype=new s,c.prototype.constructor=c,c.prototype.init=function(e){var t=this;return this.options=n.extend({},this.defaultOptions,e),this.imgProportion=350/300,this.validated=!1,this.code=null,this.isShowOpener=!1,this.clickPoint=[],this.$element=n('<div class="mz-captcha-input" tabindex="11" hidefocus="true">'+this.texts.hide+"</div>").appendTo(e.selector),280!==this.options.width&&this.$element.css("width",this.options.width),this.$open=n('<div class="mz-captcha-open" tabindex="10" hidefocus="true" />').hide(),this.$tips=n('<div class="mz-captcha-tips">'+this.texts.def+"</div>"),this.$readImgBox=n('<div class="mz-captcha-read" />'),this.$reload=n('<div class="mz-captcha-reload" />'),this.$validate=n('<div class="mz-btn success">验证</div>'),this.$clickImgBox=n('<div class="mz-captcha-click-img" />'),this.$clickBox=n('<div class="mz-captcha-click-box" />'),this.$top=n('<div class="mz-captcha-open-top" />'),this.$center=n('<div class="mz-captcha-open-center" />'),this.$bottom=n('<div class="mz-captcha-open-bottom">'),this.$top.append(this.$tips,this.$readImgBox),this.$center.append(this.$clickImgBox,this.$clickBox),this.$bottom.append(this.$reload,this.$validate),this.$open.append(this.$top,this.$center,this.$bottom).appendTo("body"),this.on("validate",function(e,i){e?t.$element.html(t.texts.validated).addClass("validated"):(t.updateCaptcha(),t.$element.html(t.texts.hide).removeClass("validated")),t.validated=e,t.code=i}),this.on("show",function(){t.isShowOpener=!0,t.validated?t.$element.html(t.texts.validated):t.$element.html(t.texts.unverified)}),this.on("hide",function(){t.isShowOpener=!1,t.validated?t.$element.html(t.texts.validated):t.$element.html(t.texts.hide)}),this.getImgCount.on("end",function(){t.updateCaptcha()}),this.validatedCount.on("end",function(){t.emit("validate",!1)}),this._bind(),this},c.prototype.getValidateState=function(){return this.validated},c.prototype.getValidateCode=function(){return this.code},c.prototype.reset=function(){this.validatedCount.stop(),this.removePoint(),this.emit("validate",!1)},c.prototype._setPosition=function(){var e=this.$element.offset(),t=n(window).scrollTop()+n(window).height(),i=0,o=265;return i=e.top<o||t>o+e.top?e.top+this.$element.height():e.top-o,this.$open.css({top:i,left:e.left,width:this.$element.outerWidth()-2}),this},c.prototype.defaultOptions={imgPrefix:"//store-server.meizu.com/captcha/get",type:6,len:5,sid:null,width:280,timeout:120},c.prototype.texts={def:"请按顺序点击大图中的文字",click:"再次点击图标可取消重选",over:"您以通过验证，无需重复验证",unverified:"安全验证",hide:"点击完成验证",validated:'<i class="mz-captcha-shield"></i>验证通过'},c.prototype._getImg=function(){var e=o.format({query:{type:this.options.type,len:this.options.len,sid:this.options.sid,_t:+new Date}}),t=o.resolve(this.options.imgPrefix,e);return'<img src="'+t+'" class="mz-captcha-img" alt="验证码" />'},c.prototype.updateCaptcha=function(){if(!this.isShow)return!1;var e=this._getImg();this.$readImgBox.html(e),this.$clickImgBox.html(e),this.removePoint(),this.getImgCount.counting&&this.getImgCount.stop(),this.getImgCount.count(this.options.timeout)},c.prototype.show=function(){this._setPosition(),this.$element.addClass("focus"),this.isShow=!0,0===this.getImgCount.options.time&&this.updateCaptcha(),this.$open.show(),this.emit("show")},c.prototype.hide=function(){this.isShow=!1,this.$element.removeClass("focus"),this.$open.hide(),this.emit("hide")},c.prototype.createPoint=function(e,t){if(4==this.clickPoint.length)return!1;var i=this.clickPoint.length+1,o=n('<div class="mz-captcha-click-point" data-index="'+i+'" />');return o.css({top:t-20,left:e-20}),this.clickPoint.push({x:t,y:e,e:o[0]}),this.$tips.html(this.texts.click).removeClass("error"),o},c.prototype.removePoint=function(e){var t=0;if(e){var i=!1;this.clickPoint.forEach(function(o,s){o.e===e&&(t=s,i=!0),i&&n(o.e).remove()})}else this.$clickBox.empty();this.clickPoint.splice(t,4),0===t&&this.$tips.html(this.texts.def)},c.prototype.check=function(){var e=this,t="";this.checking=!0,this.clickPoint.forEach(function(i){var n=i.y*e.imgProportion,o=i.x*e.imgProportion;t+=n+","+o+";"}),n.ajax({url:"//store-server.meizu.com/check_choice_captcha",type:"post",data:{sid:this.options.sid,captcha:t},contentType:"text/plain",beforeSend:a.show.bind(null,e.$open),success:function(t){e.removePoint(),200===t.status?(e.hide(),e.emit("validate",!0,t.randstr),e.validatedCount.count(e.options.timeout)):(e.emit("validate",!1),e.$tips.html(t.error).addClass("error")),e.checking=!1,a.hide(e.$open)},error:function(){e.emit("validate",!1),e.$tips.html("网络错误").addClass("error"),e.checking=!1,a.hide(e.$open)}})},c.prototype._bind=function(){var e=this;this.$reload.on("click",function(){e.updateCaptcha()}),this.$element.on("click",function(){e.isShow?e.hide():e.validated||(e.emit("click"),e.show())}),this.$element.on("blur",function(t){n(document).one("click",function(t){n(t.target).parents(".mz-captcha-open").length&&clearTimeout(e.blurTimeout)}),t.relatedTarget!==e.$open[0]&&(e.blurTimeout=setTimeout(function(){e.emit("blur"),e.hide()},500))}),this.$open.on("blur",function(){e.emit("blur"),e.hide()}),this.$clickBox.on("click",function(t){if(t.target===this){var i=e.createPoint(t.offsetX,t.offsetY);i&&i.appendTo(this),4===e.clickPoint.length&&e.check()}else e.removePoint(t.target)}),this.$validate.on("click",function(){e.clickPoint.length&&!e.validated?e.checking||e.check():e.validated?e.$tips.html(e.texts.over).addClass("error"):e.clickPoint.length||e.$tips.html(e.texts.def).addClass("error")}),n(window).on("resize",function(){e.isShowOpener&&(clearTimeout(e.resizeTimeout),e.resizeTimeout=setTimeout(function(){e._setPosition()},100))})},e.exports=c},1,,function(e,t,i){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,i){if(e&&d.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,i),o}function s(e){return d.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function r(e,t){return o(e,!1,!0).resolve(t)}function a(e,t){return e?o(e,!1,!0).resolveObject(t):t}var c=i(23),d=i(25);t.parse=o,t.resolve=r,t.resolveObject=a,t.format=s,t.Url=n;var l=/^([a-z0-9.+-]+:)/i,u=/:[0-9]*$/,p=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["<",">",'"',"`"," ","\r","\n","\t"],v=["{","}","|","\\","^","`"].concat(h),f=["'"].concat(v),m=["%","/","?",";","#"].concat(f),g=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,k={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=i(26);n.prototype.parse=function(e,t,i){if(!d.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(o),r=/\\/g;s[0]=s[0].replace(r,"/"),e=s.join(o);var a=e;if(a=a.trim(),!i&&1===e.split("#").length){var u=p.exec(a);if(u)return this.path=a,this.href=a,this.pathname=u[1],u[2]?(this.search=u[2],t?this.query=_.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=l.exec(a);if(h){h=h[0];var v=h.toLowerCase();this.protocol=v,a=a.substr(h.length)}if(i||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var I="//"===a.substr(0,2);!I||h&&w[h]||(a=a.substr(2),this.slashes=!0)}if(!w[h]&&(I||h&&!C[h])){for(var A=-1,$=0;$<g.length;$++){var T=a.indexOf(g[$]);T!==-1&&(A===-1||T<A)&&(A=T)}var P,D;D=A===-1?a.lastIndexOf("@"):a.lastIndexOf("@",A),D!==-1&&(P=a.slice(0,D),a=a.slice(D+1),this.auth=decodeURIComponent(P)),A=-1;for(var $=0;$<m.length;$++){var T=a.indexOf(m[$]);T!==-1&&(A===-1||T<A)&&(A=T)}A===-1&&(A=a.length),this.host=a.slice(0,A),a=a.slice(A),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var S=this.hostname.split(/\./),$=0,E=S.length;$<E;$++){var z=S[$];if(z&&!z.match(b)){for(var B="",L=0,M=z.length;L<M;L++)B+=z.charCodeAt(L)>127?"x":z[L];if(!B.match(b)){var N=S.slice(0,$),j=S.slice($+1),R=z.match(x);R&&(N.push(R[1]),j.unshift(R[2])),j.length&&(a="/"+j.join(".")+a),this.hostname=N.join(".");break}}}this.hostname.length>y?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=c.toASCII(this.hostname));var q=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+q,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!k[v])for(var $=0,E=f.length;$<E;$++){var U=f[$];if(a.indexOf(U)!==-1){var K=encodeURIComponent(U);K===U&&(K=escape(U)),a=a.split(U).join(K)}}var V=a.indexOf("#");V!==-1&&(this.hash=a.substr(V),a=a.slice(0,V));var G=a.indexOf("?");if(G!==-1?(this.search=a.substr(G),this.query=a.substr(G+1),t&&(this.query=_.parse(this.query)),a=a.slice(0,G)):t&&(this.search="",this.query={}),a&&(this.pathname=a),C[v]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var q=this.pathname||"",H=this.search||"";this.path=q+H}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(s=_.stringify(this.query));var r=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&o!==!1?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),r=r.replace("#","%23"),t+o+i+r+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(d.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var i=new n,o=Object.keys(this),s=0;s<o.length;s++){var r=o[s];i[r]=this[r]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),c=0;c<a.length;c++){var l=a[c];"protocol"!==l&&(i[l]=e[l])}return C[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!C[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var h=u[p];i[h]=e[h]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||w[e.protocol])i.pathname=e.pathname;else{for(var v=(e.pathname||"").split("/");v.length&&!(e.host=v.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==v[0]&&v.unshift(""),v.length<2&&v.unshift(""),i.pathname=v.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var f=i.pathname||"",m=i.search||"";i.path=f+m}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||g||i.host&&e.pathname,x=b,k=i.pathname&&i.pathname.split("/")||[],v=e.pathname&&e.pathname.split("/")||[],_=i.protocol&&!C[i.protocol];if(_&&(i.hostname="",i.port=null,i.host&&(""===k[0]?k[0]=i.host:k.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===v[0]?v[0]=e.host:v.unshift(e.host)),e.host=null),b=b&&(""===v[0]||""===k[0])),y)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,k=v;else if(v.length)k||(k=[]),k.pop(),k=k.concat(v),i.search=e.search,i.query=e.query;else if(!d.isNullOrUndefined(e.search)){if(_){i.hostname=i.host=k.shift();var I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");I&&(i.auth=I.shift(),i.host=i.hostname=I.shift())}return i.search=e.search,i.query=e.query,d.isNull(i.pathname)&&d.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!k.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=k.slice(-1)[0],$=(i.host||e.host||k.length>1)&&("."===A||".."===A)||""===A,T=0,P=k.length;P>=0;P--)A=k[P],"."===A?k.splice(P,1):".."===A?(k.splice(P,1),T++):T&&(k.splice(P,1),T--);if(!b&&!x)for(;T--;T)k.unshift("..");!b||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),$&&"/"!==k.join("/").substr(-1)&&k.push("");var D=""===k[0]||k[0]&&"/"===k[0].charAt(0);if(_){i.hostname=i.host=D?"":k.length?k.shift():"";var I=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@");I&&(i.auth=I.shift(),i.host=i.hostname=I.shift())}return b=b||i.host&&k.length,b&&!D&&k.unshift(""),k.length?i.pathname=k.join("/"):(i.pathname=null,i.path=null),d.isNull(i.pathname)&&d.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},n.prototype.parseHost=function(){var e=this.host,t=u.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,i){var n;(function(e,o){!function(s){function r(e){throw RangeError(S[e])}function a(e,t){for(var i=e.length,n=[];i--;)n[i]=t(e[i]);return n}function c(e,t){var i=e.split("@"),n="";i.length>1&&(n=i[0]+"@",e=i[1]),e=e.replace(O,".");var o=e.split("."),s=a(o,t).join(".");return n+s}function d(e){for(var t,i,n=[],o=0,s=e.length;o<s;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<s?(i=e.charCodeAt(o++),56320==(64512&i)?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),o--)):n.push(t);return n}function l(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=B(e>>>10&1023|55296),e=56320|1023&e),t+=B(e)}).join("")}function u(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:k}function p(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,i){var n=0;for(e=i?z(e/I):e>>1,e+=z(e/t);e>E*C>>1;n+=k)e=z(e/E);return z(n+(E+1)*e/(e+_))}function v(e){var t,i,n,o,s,a,c,d,p,v,f=[],m=e.length,g=0,y=$,b=A;for(i=e.lastIndexOf(T),i<0&&(i=0),n=0;n<i;++n)e.charCodeAt(n)>=128&&r("not-basic"),f.push(e.charCodeAt(n));for(o=i>0?i+1:0;o<m;){for(s=g,a=1,c=k;o>=m&&r("invalid-input"),d=u(e.charCodeAt(o++)),(d>=k||d>z((x-g)/a))&&r("overflow"),g+=d*a,p=c<=b?w:c>=b+C?C:c-b,!(d<p);c+=k)v=k-p,a>z(x/v)&&r("overflow"),a*=v;t=f.length+1,b=h(g-s,t,0==s),z(g/t)>x-y&&r("overflow"),y+=z(g/t),g%=t,f.splice(g++,0,y)}return l(f)}function f(e){var t,i,n,o,s,a,c,l,u,v,f,m,g,y,b,_=[];for(e=d(e),m=e.length,t=$,i=0,s=A,a=0;a<m;++a)f=e[a],f<128&&_.push(B(f));for(n=o=_.length,o&&_.push(T);n<m;){for(c=x,a=0;a<m;++a)f=e[a],f>=t&&f<c&&(c=f);for(g=n+1,c-t>z((x-i)/g)&&r("overflow"),i+=(c-t)*g,t=c,a=0;a<m;++a)if(f=e[a],f<t&&++i>x&&r("overflow"),f==t){for(l=i,u=k;v=u<=s?w:u>=s+C?C:u-s,!(l<v);u+=k)b=l-v,y=k-v,_.push(B(p(v+b%y,0))),l=z(b/y);_.push(B(p(l,0))),s=h(i,g,n==o),i=0,++n}++i,++t}return _.join("")}function m(e){return c(e,function(e){return P.test(e)?v(e.slice(4).toLowerCase()):e})}function g(e){return c(e,function(e){return D.test(e)?"xn--"+f(e):e})}var y=("object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof o&&o);y.global!==y&&y.window!==y&&y.self!==y||(s=y);var b,x=2147483647,k=36,w=1,C=26,_=38,I=700,A=72,$=128,T="-",P=/^xn--/,D=/[^\x20-\x7E]/,O=/[\x2E\u3002\uFF0E\uFF61]/g,S={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=k-w,z=Math.floor,B=String.fromCharCode;b={version:"1.3.2",ucs2:{decode:d,encode:l},decode:v,encode:f,toASCII:g,toUnicode:m},n=function(){return b}.call(t,i,t,e),!(void 0!==n&&(e.exports=n))}(this)}).call(t,i(24)(e),function(){return this}())},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,i){"use strict";t.decode=t.parse=i(27),t.encode=t.stringify=i(28)},function(e,t){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var r=/\+/g;e=e.split(t);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var c=e.length;a>0&&c>a&&(c=a);for(var d=0;d<c;++d){var l,u,p,h,v=e[d].replace(r,"%20"),f=v.indexOf(n);f>=0?(l=v.substr(0,f),u=v.substr(f+1)):(l=v,u=""),p=decodeURIComponent(l),h=decodeURIComponent(u),i(s,p)?Array.isArray(s[p])?s[p].push(h):s[p]=[s[p],h]:s[p]=h}return s}},function(e,t){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,o){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(o){var s=encodeURIComponent(i(o))+n;return Array.isArray(e[o])?e[o].map(function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[o]))}).join(t):o?encodeURIComponent(i(o))+n+encodeURIComponent(i(e)):""}},function(e,t,i){var n=i(8),o=i(13),s=function(){return this._events={},o.apply(this,arguments),this.init.apply(this,arguments)};s.prototype=new o,s.prototype.constructor=s,s.prototype.defaultOptions={time:0,step:1,timeStep:1e3},s.prototype.init=function(e){if(this._isInit)return this;var t=this;return this._isInit=!0,this._cumulative=0,this.options=n.extend({},this.defaultOptions,e),this.on("count",function(e){t.options.time=e}),0!==this.options.time&&this.count(this.options.time),this},s.prototype._correct=function(e){if(!this._correctTime)return this._correctTime=+new Date,e;var t=+new Date,i=this.options.timeStep,n=t-i;if(this._cumulative+=n-this._correctTime,this._cumulative>=i){var o=Math.floor(this._cumulative/i);this._cumulative=this._cumulative%i,e-=o*this.options.step}return this._correctTime=t,e},s.prototype.count=function(e,t){if(!t&&this._counting)return!1;var i=this;return e=this._correct(e),this._counting=setTimeout(function(){var t=e-i.options.step;t=t>=0?t:0,i.emit("count",t,e),t>0?i.count(t,!0):(delete i.counting,i.emit("end"))},this.options.timeStep),this},s.prototype.pause=function(){return clearTimeout(this._counting),delete this._counting,this},s.prototype.proceed=function(){return this.count(this.options.time),this},s.prototype.stop=function(){
return clearTimeout(this._counting),delete this._counting,delete this._correctTime,this._cumulative=0,this},s.prototype.start=function(e){return this.options=n.extend({},this.options,e),this.count(this.options.time),this},e.exports=s},function(e,t,i){var n=i(8),o=i(13),s=function(){return this._events={},o.apply(this,arguments),this.init.apply(this,arguments)};s.prototype=new o,s.prototype.constructor=s,s.prototype.init=function(e){return this.options=n.extend({},this.defaultOptions,e),this},s.prototype.defaultOptions={url:"/independent"},s.prototype.get=function(e,t){return!(!e||!n.isFunction(e))&&void n.ajax({url:this.options.url,type:"get",cache:!1,async:!t,success:function(t,i,n){if(200==t.code){var o=n.getResponseHeader("X-CSRF-TOKEN");e(null,o,n)}else e(t.error)},error:function(){e("网络错误")}})},s.prototype.async=function(){var e="";return this.get(function(t,i){if(t)throw Error(t);e=i},!0),e},e.exports=function(e){return new s(e)}},function(e,t){e.exports=meizuStoreGlobal},function(e,t,i){var n=i(8),o=i(33),s=n("#totalRedRow"),r=n("#totalRepoRow"),a=n("#totalCouponRow"),c=n("#totalOrderPrice"),d=n("#totalGiftRow"),l=n("#totalExpressPrice"),u=n("#totalPayPrice"),p=0,h=0,v=0,f=0,m=0,g=0,y=0,b=function(e){var t={pay:100*h,repo:100*f,coupon:100*v,red:100*m,expressFee:100*g,gift:100*y},i=t.pay-t.repo-t.red-t.coupon-t.gift+t.expressFee;if(e)if("string"==typeof e)i+=t[e];else for(var n=0;n<e.length;n++)i+=t[e[n]];return parseFloat((i/100).toFixed(2))},x=function(e,t){return(100*b(t)-100*e)/100<=g},k=function(e,t){var i=null;switch(e){case"coupon":v=t,i=a;break;case"red":m=t,i=s;break;case"repo":f=t,i=r;break;case"express":g=t;break;case"gift":y=t,i=d}t>0&&"express"!==e?i.show():"express"!==e&&i.hide(),"express"===e?l.text(g.toFixed(2)):n(".order-total-price",i).text(t.toFixed(2));var c=b(null);p!==c&&(p=c,o.updateHuabei(c),u.text(c.toFixed(2)))},w=function(e){p=h=e.totalOrderPayMoney,c.text(e.totalOrderMoney.toFixed(2)),u.text(e.totalOrderPayMoney.toFixed(2)),l.text(e.totalExpressFee.toFixed(2))};e.exports={init:w,setPrice:k,getActivePayPrice:b,checkSelectedPriceOver:x}},function(e,t,i){i(34);var n=i(8);i(49);var o,s,r,a,c=i(12),d=i(13),l=i(50),u=i(15),p=i(9),h=i(29),v=n("#orderTotal"),f=n("#payToolsContent"),m=n('<div class="order-pay-dialog-qrcode" />'),g=null,y=null,b=null,x=new d,k=c.template(i(51)),w=c.template(i(52)),C=c.template(i(53)),_="active",I="disabled",A="",$=!1,T=!1,P=null,D=null,O=null,S=null,E=null,z=0,B=!1,L=0,M=new p({type:"tips",title:"提示"}),N=new p({hasClose:!1,className:"order-pay-dialog",title:"请使用微信扫码完成支付",content:m,buttons:[]}),j=function(e){if($){if(e&&(e<z?(P.addClass(I),"Huabei"===r&&F.call(D)):P.removeClass(I)),"Huabei"!==r||!B&&!e)return void(e&&(L=e,B=!0));clearTimeout(E),E=setTimeout(R.bind(null,e),100)}},R=function(e){u.show(v),n.ajax({url:"/order/huabei.html",type:"get",data:{total_money:e||L,source_time:a},success:function(e){u.hide(v),B=!1,200===e.code?U(e.data):(M.show({content:e.msg}),P.addClass(I),"Huabei"===r&&F.call(D),n(".order-total-pay-tips").text(e.msg))},error:function(){u.hide(v),M.show({content:"花呗分期服务跑丢了~"}),P.addClass(I),"Huabei"===r&&F.call(D),n(".order-total-pay-tips").text("花呗分期服务跑丢了~")}})},q=function(){n(".order-total-pay-label",f).on("click",F),n(".more-paytype").on("click",function(){n(".order-total-pay-label.wechat").show(),n(".more-paytype").remove()})},F=function(){if(!n(this).hasClass(I)){var e=n(this).parents(".order-total-pay-row").index(),t=n(this).index(),i=l.payType[e],o=i.types[t];O&&O.removeClass(_),n(this).addClass(_),O=n(this),r=o.key,s=i.tool,"Huabei"===o.key?(g.addClass(_),j()):g.removeClass(_),"banks"!==i.name?y.hide():(n("tbody",y).html(w(o)),y.show())}},U=function(e){e.forEach(function(e){e.isDefault&&(o=e.periods),o===e.periods&&(e.isDefault=!0)});var t=n(C({huabeis:e}));t.on("click",function(){var t=n(this).index(),i=e[t];o=i.periods,n(this).addClass(_).siblings().removeClass(_)}),b.html(t)},K=function(e,t,i,o){a=t,z=i;var c=l.huabei=e||[];c.length||l.payType[0].types.shift(),l.payType[0].types[0].selected=!0,"noWeixin"===o&&l.payType.splice(1,1),f.html(k(l)),P=n(".order-total-pay-label.huabei",f),D=n(".order-total-pay-label.alipay",f),b=n(".order-total-pay-huabei-content",f),g=n(".order-total-pay-huabei",f),y=n(".order-total-pay-banks-detail",f),s=l.payType[0].tool,r=l.payType[0].types[0].key,O=n(".order-total-pay-label:eq(0)",f),c.length?(n(".order-total-pay-label.wechat,.more-paytype").addClass("has-huabei"),$=!0,U(c),n('<div class="order-total-pay-tips" />').text("订单满"+z+"元可分期").appendTo(P)):n(".order-total-pay-label.wechat,.more-paytype").removeClass("has-huabei"),q()},V=function(){var e={payTool:s,payMethod:r};return"Huabei"===r&&(e.huabei=o),e},G=function(){u.show(m),n.ajax({url:"/order/qrcodeSubmit/"+A,success:function(e){200===e.code?Q(e.data):M.show({content:e.msg}),u.hide(m)},error:function(){u.hide(m),M.show({content:"微信扫一扫服务器开小差啦~"})}})},H=function(e){return(!T||!e)&&(T=!0,void n.ajax({url:"/order/is_paid/"+A,success:function(e){e.data?x.emit("success","//paycenter.meizu.com/web/success.html"):setTimeout(H,3e3)},error:function(){setTimeout(H,3e3)}}))},Q=function(e){m.qrcode({render:"table",text:e.url,width:230,height:230}),S||(S=new h({step:1e3}),S.on("end",G)),S.stop().count(e.timeout),N.show(),H(!0)},X=function(){return"WECHATPAY"===s&&"NATIVE"===r},W=function(e,t,i){return A=i,Q({url:e,timeout:t})};e.exports={init:K,on:x.on.bind(x),getPayType:V,handlePay:W,isWechatPay:X,updateHuabei:j}},1,,,,,,,,,,,,,,,function(e,t){!function(e){e.fn.qrcode=function(t){function i(e){this.mode=a,this.data=e}function n(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function o(e,t){if(void 0==e.length)throw Error(e.length+"/"+t);for(var i=0;i<e.length&&0==e[i];)i++;this.num=Array(e.length-i+t);for(var n=0;n<e.length-i;n++)this.num[n]=e[n+i]}function s(e,t){this.totalCount=e,this.dataCount=t}function r(){this.buffer=[],this.length=0}var a;i.prototype={getLength:function(){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},n.prototype={addData:function(e){this.dataList.push(new i(e)),this.dataCache=null},isDark:function(e,t){if(0>e||this.moduleCount<=e||0>t||this.moduleCount<=t)throw Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var e=1,e=1;40>e;e++){for(var t=s.getRSBlocks(e,this.errorCorrectLevel),i=new r,n=0,o=0;o<t.length;o++)n+=t[o].dataCount;for(o=0;o<this.dataList.length;o++)t=this.dataList[o],i.put(t.mode,4),i.put(t.getLength(),c.getLengthInBits(t.mode,e)),t.write(i);if(i.getLengthInBits()<=8*n)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++){this.modules[i]=Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[i][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),7<=this.typeNumber&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var i=-1;7>=i;i++)if(!(-1>=e+i||this.moduleCount<=e+i))for(var n=-1;7>=n;n++)-1>=t+n||this.moduleCount<=t+n||(this.modules[e+i][t+n]=0<=i&&6>=i&&(0==n||6==n)||0<=n&&6>=n&&(0==i||6==i)||2<=i&&4>=i&&2<=n&&4>=n)},getBestMaskPattern:function(){for(var e=0,t=0,i=0;8>i;i++){this.makeImpl(!0,i);var n=c.getLostPoint(this);(0==i||e>n)&&(e=n,t=i)}return t},createMovieClip:function(e,t,i){for(e=e.createEmptyMovieClip(t,i),this.make(),t=0;t<this.modules.length;t++)for(var i=1*t,n=0;n<this.modules[t].length;n++){var o=1*n;this.modules[t][n]&&(e.beginFill(0,100),e.moveTo(o,i),e.lineTo(o+1,i),e.lineTo(o+1,i+1),e.lineTo(o,i+1),e.endFill())}return e},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=0==e%2);for(e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=0==e%2)},setupPositionAdjustPattern:function(){for(var e=c.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var n=e[t],o=e[i];if(null==this.modules[n][o])for(var s=-2;2>=s;s++)for(var r=-2;2>=r;r++)this.modules[n+s][o+r]=-2==s||2==s||-2==r||2==r||0==s&&0==r}},setupTypeNumber:function(e){for(var t=c.getBCHTypeNumber(this.typeNumber),i=0;18>i;i++){var n=!e&&1==(t>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=n}for(i=0;18>i;i++)n=!e&&1==(t>>i&1),this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=n},setupTypeInfo:function(e,t){for(var i=c.getBCHTypeInfo(this.errorCorrectLevel<<3|t),n=0;15>n;n++){var o=!e&&1==(i>>n&1);6>n?this.modules[n][8]=o:8>n?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(n=0;15>n;n++)o=!e&&1==(i>>n&1),8>n?this.modules[8][this.moduleCount-n-1]=o:9>n?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1]=o;this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var i=-1,n=this.moduleCount-1,o=7,s=0,r=this.moduleCount-1;0<r;r-=2)for(6==r&&r--;;){for(var a=0;2>a;a++)if(null==this.modules[n][r-a]){var d=!1;s<e.length&&(d=1==(e[s]>>>o&1)),c.getMask(t,n,r-a)&&(d=!d),this.modules[n][r-a]=d,o--,-1==o&&(s++,o=7)}if(n+=i,0>n||this.moduleCount<=n){n-=i,i=-i;break}}}},n.PAD0=236,n.PAD1=17,n.createData=function(e,t,i){for(var t=s.getRSBlocks(e,t),o=new r,a=0;a<i.length;a++){var d=i[a];o.put(d.mode,4),o.put(d.getLength(),c.getLengthInBits(d.mode,e)),d.write(o)}for(a=e=0;a<t.length;a++)e+=t[a].dataCount;if(o.getLengthInBits()>8*e)throw Error("code length overflow. ("+o.getLengthInBits()+">"+8*e+")");for(o.getLengthInBits()+4<=8*e&&o.put(0,4);0!=o.getLengthInBits()%8;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*e)&&(o.put(n.PAD0,8),!(o.getLengthInBits()>=8*e));)o.put(n.PAD1,8);return n.createBytes(o,t)},n.createBytes=function(e,t){for(var i=0,n=0,s=0,r=Array(t.length),a=Array(t.length),d=0;d<t.length;d++){var l=t[d].dataCount,u=t[d].totalCount-l,n=Math.max(n,l),s=Math.max(s,u);r[d]=Array(l);for(var p=0;p<r[d].length;p++)r[d][p]=255&e.buffer[p+i];for(i+=l,p=c.getErrorCorrectPolynomial(u),l=new o(r[d],p.getLength()-1).mod(p),a[d]=Array(p.getLength()-1),p=0;p<a[d].length;p++)u=p+l.getLength()-a[d].length,a[d][p]=0<=u?l.get(u):0}for(p=d=0;p<t.length;p++)d+=t[p].totalCount;for(i=Array(d),p=l=0;p<n;p++)for(d=0;d<t.length;d++)p<r[d].length&&(i[l++]=r[d][p]);for(p=0;p<s;p++)for(d=0;d<t.length;d++)p<a[d].length&&(i[l++]=a[d][p]);return i},a=4;for(var c={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;0<=c.getBCHDigit(t)-c.getBCHDigit(c.G15);)t^=c.G15<<c.getBCHDigit(t)-c.getBCHDigit(c.G15);return(e<<10|t)^c.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;0<=c.getBCHDigit(t)-c.getBCHDigit(c.G18);)t^=c.G18<<c.getBCHDigit(t)-c.getBCHDigit(c.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return c.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,i){switch(e){case 0:return 0==(t+i)%2;case 1:return 0==t%2;case 2:return 0==i%3;case 3:return 0==(t+i)%3;case 4:return 0==(Math.floor(t/2)+Math.floor(i/3))%2;case 5:return 0==t*i%2+t*i%3;case 6:return 0==(t*i%2+t*i%3)%2;case 7:return 0==(t*i%3+(t+i)%2)%2;default:throw Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new o([1],0),i=0;i<e;i++)t=t.multiply(new o([1,d.gexp(i)],0));return t},getLengthInBits:function(e,t){if(1<=t&&10>t)switch(e){case 1:return 10;case 2:return 9;case a:return 8;case 8:return 8;default:throw Error("mode:"+e)}else if(27>t)switch(e){case 1:return 12;case 2:return 11;case a:return 16;case 8:return 10;default:throw Error("mode:"+e)}else{if(!(41>t))throw Error("type:"+t);switch(e){case 1:return 14;case 2:return 13;case a:return 16;case 8:return 12;default:throw Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),i=0,n=0;n<t;n++)for(var o=0;o<t;o++){for(var s=0,r=e.isDark(n,o),a=-1;1>=a;a++)if(!(0>n+a||t<=n+a))for(var c=-1;1>=c;c++)0>o+c||t<=o+c||0==a&&0==c||r==e.isDark(n+a,o+c)&&s++;5<s&&(i+=3+s-5)}for(n=0;n<t-1;n++)for(o=0;o<t-1;o++)s=0,e.isDark(n,o)&&s++,e.isDark(n+1,o)&&s++,e.isDark(n,o+1)&&s++,e.isDark(n+1,o+1)&&s++,(0==s||4==s)&&(i+=3);for(n=0;n<t;n++)for(o=0;o<t-6;o++)e.isDark(n,o)&&!e.isDark(n,o+1)&&e.isDark(n,o+2)&&e.isDark(n,o+3)&&e.isDark(n,o+4)&&!e.isDark(n,o+5)&&e.isDark(n,o+6)&&(i+=40);for(o=0;o<t;o++)for(n=0;n<t-6;n++)e.isDark(n,o)&&!e.isDark(n+1,o)&&e.isDark(n+2,o)&&e.isDark(n+3,o)&&e.isDark(n+4,o)&&!e.isDark(n+5,o)&&e.isDark(n+6,o)&&(i+=40);for(o=s=0;o<t;o++)for(n=0;n<t;n++)e.isDark(n,o)&&s++;return e=Math.abs(100*s/t/t-50)/5,i+10*e}},d={glog:function(e){if(1>e)throw Error("glog("+e+")");return d.LOG_TABLE[e]},gexp:function(e){for(;0>e;)e+=255;for(;256<=e;)e-=255;return d.EXP_TABLE[e]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},l=0;8>l;l++)d.EXP_TABLE[l]=1<<l;for(l=8;256>l;l++)d.EXP_TABLE[l]=d.EXP_TABLE[l-4]^d.EXP_TABLE[l-5]^d.EXP_TABLE[l-6]^d.EXP_TABLE[l-8];for(l=0;255>l;l++)d.LOG_TABLE[d.EXP_TABLE[l]]=l;return o.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var n=0;n<e.getLength();n++)t[i+n]^=d.gexp(d.glog(this.get(i))+d.glog(e.get(n)));return new o(t,0)},mod:function(e){if(0>this.getLength()-e.getLength())return this;for(var t=d.glog(this.get(0))-d.glog(e.get(0)),i=Array(this.getLength()),n=0;n<this.getLength();n++)i[n]=this.get(n);for(n=0;n<e.getLength();n++)i[n]^=d.gexp(d.glog(e.get(n))+t);return new o(i,0).mod(e)}},s.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],s.getRSBlocks=function(e,t){var i=s.getRsBlockTable(e,t);if(void 0==i)throw Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var n=i.length/3,o=[],r=0;r<n;r++)for(var a=i[3*r+0],c=i[3*r+1],d=i[3*r+2],l=0;l<a;l++)o.push(new s(c,d));return o},s.getRsBlockTable=function(e,t){switch(t){case 1:return s.RS_BLOCK_TABLE[4*(e-1)+0];case 0:return s.RS_BLOCK_TABLE[4*(e-1)+1];case 3:return s.RS_BLOCK_TABLE[4*(e-1)+2];case 2:return s.RS_BLOCK_TABLE[4*(e-1)+3]}},r.prototype={get:function(e){return 1==(this.buffer[Math.floor(e/8)]>>>7-e%8&1)},put:function(e,t){for(var i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},"string"==typeof t&&(t={text:t}),t=e.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},t),this.each(function(){var i;if("canvas"==t.render){i=new n(t.typeNumber,t.correctLevel),i.addData(t.text),i.make();var o=document.createElement("canvas");o.width=t.width,o.height=t.height;for(var s=o.getContext("2d"),r=t.width/i.getModuleCount(),a=t.height/i.getModuleCount(),c=0;c<i.getModuleCount();c++)for(var d=0;d<i.getModuleCount();d++){s.fillStyle=i.isDark(c,d)?t.foreground:t.background;var l=Math.ceil((d+1)*r)-Math.floor(d*r),u=Math.ceil((c+1)*r)-Math.floor(c*r);s.fillRect(Math.round(d*r),Math.round(c*a),l,u)}}else for(i=new n(t.typeNumber,t.correctLevel),i.addData(t.text),i.make(),o=e("<table></table>").css("width",t.width+"px").css("height",t.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",t.background),s=t.width/i.getModuleCount(),r=t.height/i.getModuleCount(),a=0;a<i.getModuleCount();a++)for(c=e("<tr></tr>").css("height",r+"px").appendTo(o),d=0;d<i.getModuleCount();d++)e("<td></td>").css("width",s+"px").css("background-color",i.isDark(a,d)?t.foreground:t.background).appendTo(c);i=o,jQuery(i).appendTo(this)})}}(jQuery)},function(e,t){e.exports={payType:[{title:"快捷支付",name:"alipay",tool:"ALIPAY",types:[{key:"Huabei",className:"huabei"},{key:"Alipay",className:"alipay"}]},{title:"微信支付",name:"wechat",tool:"WECHATPAY",types:[{key:"NATIVE",className:"wechat",activity:"平安银行信用卡享随机立减优惠",StartTime:1526832e6,endTime:1533052799e3}]},{title:"网上银行",name:"banks",tool:"ALIPAY",types:[{key:"BOCB2C",className:"boc",quota:"储蓄卡：单笔限额50000元，每日限额100000元；信用卡：单笔限额300元，每日限额5000元。",type:"信用卡/储蓄卡",phone:"95566"},{key:"CCB",className:"ccb",quota:"准贷记卡：动态口令卡用户单笔限额5000元，每日限额5000元；网银盾用户单笔限额5000元，每日限额5000元；<br>储蓄卡：动态口令用户限额50000元；网银盾用户限额500000元；<br>信用卡：限额500元。<br>（注：建行企业版的支付限额以在银行设置的限额为准）",type:"信用卡/储蓄卡/准贷记卡",phone:"95533"},{key:"ABC",className:"abc",quota:"储蓄卡：动态口令卡用户单笔限额1000元，每日限额3000元；<br>准贷记卡：动态口令卡用户单笔限额1000元，每日限额3000元；移动证书用户无限额。<br>（注：农行企业版的支付限额以在银行设置的限额为准）",type:"借记卡/准贷记卡",phone:"95599"},{key:"ICBCB2C",className:"icbc",quota:"U盾用户：信用卡单笔限额1000元与信用卡本身限额孰低，每日限额信用卡本身透支限额。储蓄卡单笔限额100万元，每日限额：100万元；<br>柜面注册存量静态密码用户：信用卡每日限额300元与信用卡本身限额孰低，储蓄卡每日限额300元；<br>已开通手机短信认证电子银行口令卡用户：信用卡单笔限额1000元与信用卡本身限额孰低，每日限额000元与信用卡本身限额孰低；储蓄卡单笔限额2000元，每日限额5000元；<br>未开通手机短信认证电子银行口令卡用户：信用卡单笔限额500元与信用卡本身限额孰低，每日限额1000元与信用卡本身限额孰低；储蓄卡单笔限额500元，每日限额1000元。<br>（注：工行企业版的支付限额以在银行设置的限额为准）",type:"信用卡/储蓄卡",phone:"95588"},{key:"COMM",className:"comm",quota:"手机注册版：信用卡限额5000元与信用卡本身限额孰低；储蓄卡和准贷记卡限额5000元；<br>证书认证版：信用卡限额1万元与信用卡本身限额孰低；储蓄卡和准贷记卡限额5万元。",type:"信用卡/储蓄卡/准贷记卡",phone:"95559"},{key:"CMB",className:"cmb",quota:"储蓄卡/准贷记卡：大众版限额500元；专业版无限额；<br>信用卡：单笔限额499.99元，每日限额为信用卡本身透支额度。",type:"信用卡/储蓄卡/准贷记卡",phone:"95555"},{key:"PSBC-DEBIT",className:"psbc",quota:"单张汇票收据限额5000元；<br>邮政网汇e充值：普通账户1次/日；已开通短信提醒的账户3次/日；已安装数字证书的账户不限次数。",type:"不需要邮政账户也可以",phone:"11185"},{key:"CIB",className:"cib",quota:"储蓄卡：证书用户无限额；非证书用户有1000和5000两种限额，由用户在开通网上购物功能时自行选择；e卡每日5000元；<br>信用卡：单笔限额600元，账期内限额10000元。",type:"信用卡/储蓄卡",phone:"95561"},{key:"shbank",className:"shbank",quota:"一代E盾 单笔限额：5万，日累计限额:20万；<br>一代E盾+动态密码 单笔限额：50万，日累计限额：100万；<br>二代/通用E盾（普通客户） 单笔限额：100万，日累计限额：500万；<br>二代/通用E盾（慧通及以上客户等级） 单笔限额：200万，日累计限额：2000万。<br>（注：上海银行企业版的支付限额以在银行设置的限额为准）",type:"储蓄卡",phone:"95594"}]}]}},function(e,t){e.exports='<% payType.forEach(function (type, rowIndex) { %>\n<div class="order-total-pay-row clearfix">\n  <div class="order-total-pay-title <%= type.name === \'wechat\'?\' wechat-title\':\'\' %>"><%= type.title %></div>\n  <ul class="order-total-pay-list clearfix">\n    <% type.types.forEach(function (tool) { %>\n    <li class="order-total-pay-label <%= tool.className %><%= tool.selected ? \' active\' : \'\' %>" data-bh="click_store_pay_pm_<%= tool.className %>">\n      <div class="order-total-pay-radio"></div>\n      <div class="order-total-pay-img"></div>\n      <% if (tool.activity && (window.globalData.data.sysTime > tool.StartTime) && (window.globalData.data.sysTime < tool.endTime)) { %>\n        <div class="order-total-pay-activity"><%= tool.activity %></div>\n      <% } %>\n    </li>\n    <% }) %>\n  </ul>\n  <div class="more-paytype">更多支付方式 ></div>\n  <% if (type.name === \'alipay\' && huabei.length) { %>\n  <div class="order-total-pay-huabei active">\n    <div class="order-total-pay-huabei-content clearfix">\n\n    </div>\n  </div>\n  <% } else if (type.name === \'banks\') { %>\n  <table class="order-total-pay-banks-detail" cellspacing="0" cellpadding="0">\n    <thead>\n    <tr>\n      <th width="150px">银行名称</th>\n      <th width="400px">限额</th>\n      <th width="140px">支持卡种</th>\n      <th width="140px">客服电话</th>\n    </tr>\n    </thead>\n    <tbody>\n    </tbody>\n  </table>\n  <% } %>\n</div>\n<% }) %>\n'},function(e,t){e.exports='<tr class="<%= className %>">\n  <td width="150px"><div class="order-total-pay-img"></div></td>\n  <td width="400px" class="quota"><%= quota %></td>\n  <td width="140px"><%= type %></td>\n  <td width="140px"><%= phone %></td>\n</tr>\n'},function(e,t){e.exports="<% huabeis.forEach(function (huabei) { %>\n<div class=\"order-total-pay-huabei-choose<%= huabei.isDefault ? ' active' : '' %>\">\n  <p class=\"order-total-pay-huabei-top\">\n    <span class=\"order-total-pay-huabei-price\"><%= huabei.price %></span> × <%= huabei.periods %>期\n  </p>\n  <p><%= parseFloat(huabei.fee) ? ('含手续费 ￥' + huabei.fee + '/期') : '免手续费' %></p>\n</div>\n<% }) %>\n"},function(e,t,i){i(55);var n=i(8),o=i(12),s=i(30)(),r=i(15),a=i(57),c=i(9),d=i(13),l=i(61),u="tips",p="data-tips",h=[],v=!1,f=0,m=null,g=null,y=null,b=null,x=!0,k=174,w={name:/^[\u4E00-\u9FA5A-Za-z0-9_\-\(\)\（\）\·]+$/,phone:/^[0-9]{11}$/,detail:/^[\u4E00-\u9FA5A-Za-z0-9_\-\(\)\（\）]+$/},C=n("#addressList"),_=n("#addressAdd"),I=n("#addressModule"),A=n("#orderAddressHasOldTips"),$=n("#orderAddressMore"),T=n(l),P=new c({title:"提示",type:"tips"}),D=new d,O=new c({className:"address-adder",content:T,buttons:[{type:"success",text:"确认",callback:function(){var e=q();if(!e)return!1;var t=F();if(!t)return!1;var i=K();if(!i)return!1;var n=U();return!!n&&void H(e,t,i,n)}},{type:"cancel",text:"取消",callback:function(){this.hide()}}]}),S=i(62),E=o.template(i(63),{variable:"data"}),z=new a({selector:n(".address-adder-select",T),showOther:!0,province:{placeholder:"省份/直辖市"},other:{errorTips:"其他地址不能包含特殊字符",placeholder:"请输入其他街道名称"}}),B=function(){v||(C.find(".order-address-checkbox.add").remove(),f>3&&f<10&&x?n(S).insertAfter(C.children().eq(2)):f<10&&n(S).appendTo(C),x?C.css({height:k}):C.css({height:Math.ceil((f+1)/4)*k}),x&&f>3&&$.css("display","inline-block"))},L=function(e){n(this).addClass("checked").siblings().removeClass("checked"),m=e.id,D.emit("selectAddress",n.extend({},e))},M=function(e,t){var i=n(t.delegateTarget);return n.ajax({url:"/customer_address/remove_submit.html",type:"get",data:{id:e.id},dataType:"json",timeout:1e4,beforeSend:r.show.bind(this,I),success:function(t){200===t.code?(f--,i.remove(),m===e.id&&(m=null),B()):P.show({content:t.message}),r.hide(I)},error:function(){r.hide(I),P.show({content:"网络错误"})}}),!1},N=function(e,t){b=e,y=n(t.delegateTarget),g=e.id,V(e),z.setData({province:{id:e.provinceId,text:e.province},city:{id:e.cityId,text:e.city},area:{id:e.areaId,text:e.area},street:{id:e.townId,text:0==e.townId?"其他":e.town,zipCode:e.zipCode},other:0==e.townId?e.town:""},!!e.isOld),e&&0==e.townId&&n(".address-adder-other",T).show(),O.show({title:"修改地址"}).setPosition()},j=function(e){return e.isOld&&A.css("display","inline-block"),e.isSelected=e.id==m||void 0!==e.useAppointAddr,n(E(e)).on("click",function(){n(this).hasClass("disabled")||n(this).hasClass("checked")||L.call(this,e)}).on("click",".order-address-checkbox-delete",M.bind(this,e)).on("click",".order-address-checkbox-edit,.order-address-checkbox-perfect",N.bind(this,e))},R=function(e){var t;e.useAppointAddr?(m=e.activeAddressId,f=1,v=!0,e.appointAddress.useAppointAddr=e.useAppointAddr,t=j(e.appointAddress),h.push(e.appointAddress)):(m=e.activeAddressId?e.activeAddressId:null,f=e.addressList.length,e.addressList.sort(function(t){return t.id===e.activeAddressId?-1:1}).sort(function(e,t){return e.isOld-t.isOld}),t=n.map(e.addressList,j.bind(this)),h=e.addressList,_.show()),C.append(t),B()},q=function(){var e=n(".address-adder-name",T),t=n.trim(e.val()),i=e.parent();return t.length?t.length>15?(i.addClass(u).attr(p,"收件人姓名过长，请重新输入！"),!1):w.name.test(t)?(i.removeClass(u).attr(p," "),t):(i.addClass(u).attr(p,"请输入正确的收件人姓名！"),!1):(i.addClass(u).attr(p,"请输入收件人姓名！"),!1)},F=function(){var e=n(".address-adder-phone",T),t=n.trim(e.val()),i=e.parent();return t.length?w.phone.test(t)?(i.removeClass(u).attr(p," "),t):(i.addClass(u).attr(p,"请输入正确的手机号码！"),!1):(i.addClass(u).attr(p,"请输入手机号码！"),!1)},U=function(){var e=n(".address-adder-detail",T),t=n.trim(e.val()),i=e.parent();return!t.length||t.length<4?(i.addClass(u).attr(p,"请输入详细地址！"),!1):t.length>50?(i.addClass(u).attr(p,"详细地址过长，请重新输入！"),!1):w.detail.test(t)?(i.removeClass(u).attr(p," "),t):(i.addClass(u).attr(p,"请输入正确的详细地址！"),!1)},K=function(){var e=z.getData(),t=n(".address-adder-select",T);return e.province.id&&e.city.id&&e.area.id&&""!==e.street.id?(t.removeClass(u).attr(p," "),(0!==e.street.id||""!==e.other)&&e):(t.addClass(u).attr(p,"请选择地址"),!1)},V=function(e){n(".address-adder-other",T).hide(),n(".address-adder-name",T).val(e.receiver).parent().removeClass(u),n(".address-adder-phone",T).val(e.telNumber).parent().removeClass(u),n(".address-adder-detail",T).val(e.address).parent().removeClass(u)},G=function(){z.on("change",function(e,t,i){"street"===e&&0===i||"other"===e?n(".address-adder-other",T).show():n(".address-adder-other",T).hide(),O.setPosition()}),C.on("click",".order-address-checkbox.add",function(){V({receiver:"",telNumber:"",address:""}),z.clear(),O.show({title:"添加新地址"}).setPosition()}),$.on("click",function(){x&&(x=!1),B(),n(this).remove()}),n(".address-adder-name",T).on("blur",q),n(".address-adder-phone",T).on("blur",F),n(".address-adder-detail",T).on("blur",U)},H=function(e,t,i,o){if(f>=10&&!g)return void P.show({content:"最多不能超过10个地址"});var a=i.province.text+i.city.text+(i.area.text==i.street.text||0==i.street.id?i.area.text:i.area.text+i.street.text)+i.other+o,c=i.street.zipCode||i.area.zipCode||i.city.zipCode||i.province.zipCode||0,d={provinceId:i.province.id,province:i.province.text,cityId:i.city.id,city:i.city.text,areaId:i.area.id,area:i.area.text,townId:i.street.id,town:0==i.street.id?i.other:i.street.text,zipCode:c,completeAddress:a,address:o,id:g||0,receiver:e,telNumber:t};s.get(function(e,t){return e?void P.show({content:e}):void n.ajax({url:"/customer_address/modify_submit.html",type:"post",data:d,dataType:"json",headers:{"X-CSRF-TOKEN":t},timeout:1e4,beforeSend:r.show.bind(null,I),success:function(e){if(200===e.code){if(g){var t=n(j(d)).replaceAll(y);n.extend(b,d),L.call(t,d)}else f++,d.id=e.data,h.push(d),n(j(d)).appendTo(C).click(),f>3&&!g&&(x=!1,$.remove()),B();b=null,y=null,g=null,O.hide()}else P.show({content:e.message||e.msg});r.hide(I)},error:function(){r.hide(I),P.show({content:"网络错误"})}})})},Q=function(){return m},X=function(e){if(void 0===e&&(e=m),v)return h[0];for(var t=null,i=0;i<h.length;i++)e===h[i].id&&(t=h[i]);return t},W=function(e){R(e),G()};e.exports={init:W,event:D,$addressModule:I,getActiveAddressId:Q,getAddressObjectById:X}},1,,function(e,t,i){i(58);var n=i(8),o=i(13),s=i(59),r=function(){return this._events={},o.apply(this,arguments),this.data={province:{id:"",text:"",zipCode:""},city:{id:"",text:"",zipCode:""},area:{id:"",text:"",zipCode:""},street:{id:"",text:"",zipCode:""},other:""},arguments.length>0?this.init.apply(this,arguments):this};r.prototype=new o,r.prototype.constructor=r,r.prototype.levelArray=["province","city","area","street"],r.prototype.cityData={province:{index:0,data:{},json:{}},city:{index:1,data:{},json:{}},area:{index:2,data:{},json:{}},street:{index:3,data:{},json:{}}},r.prototype.defaultOptions={alert:function(e){alert(e)},listValueKey:"code",listTextKey:"name",selector:"",showOther:!1,province:{placeholder:"省/直辖市",name:""},city:{placeholder:"城市",name:""},area:{placeholder:"区/县",name:""},street:{placeholder:"乡镇/街道",name:""},other:{maxlength:10,errorTips:"内容有误",placeholder:"其他",name:""}},r.prototype.init=function(e){this.options=n.extend(!0,{},this.defaultOptions,e);var t=this,i="<div />";return this.DOMS={province:n(i),city:n(i),area:n(i),street:n(i)},this.$otherInput=n(i).addClass("mz-address-other mz-input-warp").append('<input type="text" class="mz-input mz-address-input" placeholder="'+this.options.other.placeholder+'" maxlength="'+this.options.other.maxlength+'" />').hide().attr("name",this.options.other.name),this.$element=n(e.selector).append(this.DOMS.province,this.DOMS.city,this.DOMS.area,this.DOMS.street,this.$otherInput).addClass("mz-address"),n.each(this.DOMS,function(e){t.DOMS[e]=new s({selector:this,placeholder:t.options[e].placeholder,name:t.options[e].name,listValueKey:t.options.listValueKey,listTextKey:t.options.listTextKey}).on("select",t._handleChange.bind(t,e)).on("click",t._handleClick.bind(t,e))}),this.otherInputReg=/^[\u4E00-\u9FA5A-Za-z0-9_\-\(\)\（\）]+$/,n(".mz-input",this.$otherInput).on("input propertychange",function(){var e=n(this).val();t.otherInputReg.test(e)?(t.data.other=e,n(this).parent().removeClass("tips").removeAttr("data-tips")):(t.data.other="",n(this).parent().addClass("tips").attr("data-tips",t.options.other.errorTips)),t.emit("change","other",t.data.other,t.data.other,t.getData())}),this},r.prototype.clear=function(e){e=e||0;for(var t=e;t<this.levelArray.length;t++){var i=this.levelArray[t];this.DOMS[i].clear(),this.data[i]={id:"",text:"",zipCode:""}}return this.data.other="",this.$otherInput.removeClass("tips").removeAttr("data-tips"),this.$otherInput.hide().children().val(""),
this},r.prototype.setData=function(e,t,i){if(t){var o=this;this._getData("province",0,function(t){this.DOMS.province.setDownmenu(t).setData(e.province.text),this.data.province={id:o.DOMS.province.options.value,text:o.DOMS.province.options.text,zipCode:""},this._handleChange("province",o.DOMS.province.options.text,o.DOMS.province.options.value),i&&n.isFunction(i)&&i()})}else n.each(e,function(e,t){"other"!=e&&this.DOMS[e].setData(t.text,t.id)}.bind(this)),this.data=n.extend(!0,{},this.data,e),this.$otherInput.removeClass("tips").removeAttr("data-tips"),0==this.data.street.id&&this.options.showOther?this.$otherInput.show().children().val(this.data.other):this.$otherInput.hide(),i&&n.isFunction(i)&&i();return this},r.prototype.getData=function(){return n.extend(!0,{},this.data)},r.prototype._handleClick=function(e){var t=Array.prototype.slice.call(arguments);t.push(this.getData()),this.emit.apply(this,["click"].concat(t));var i=this.cityData[e].index,n=this.levelArray[i-1]||"province",o="province"==e?0:this.data[n].id;this.DOMS[e].$ul||!o&&0!=i||this._getData(e,o,function(t){this.DOMS[e].setDownmenu(t)})},r.prototype._extendCityJson=function(e,t){var i=this;n.each(t,function(t,n){i.cityData[e].json[n[i.options.listValueKey]]=n})},r.prototype._handleChange=function(e,t,i){var n=this.cityData[e].index;if(t&&(this.data[e].id=i,this.data[e].text=t,this.data[e].zipCode=this.cityData[e].json[i].zipCode||"",this.clear(n+1),this.emit("change",e,t,i,this.getData())),n==this.levelArray.length-1)return void(0==i&&this.options.showOther&&this.$otherInput.show());var o=this.levelArray[n+1];this._getData(o,i,function(e){this.DOMS[o].setDownmenu(e),1==e.length&&(this.DOMS[o].setData(e[0][this.options.listTextKey],e[0][this.options.listValueKey]),this._handleChange(o,e[0][this.options.listTextKey],e[0][this.options.listValueKey]))})},r.prototype._getData=function(e,t,i){return t=t||0,this.cityData[e].data[t]?void setTimeout(function(){i.call(this,this.cityData[e].data[t]),this.emit("data",e,this.cityData[e].data[t])}.bind(this)):void n.ajax({url:"//area.meizu.com/area/child/query/"+t,dataType:"jsonp",success:function(n){n.success?(this.cityData[e].data[t]=n.data,this._extendCityJson(e,n.data),this.emit("data",e,n.data),i.call(this,n.data)):this.options.alert(n.errorMsg)}.bind(this),error:function(){this.options.alert("服务器忙")}.bind(this)})},r.prototype.remove=function(){var e=this;this.clear(),n.each(this.DOMS,function(t,i){i.remove(),e.DOMS[t]=null})},e.exports=r},1,function(e,t,i){i(60);var n=i(8),o=i(13),s=function(){return this._events={},o.apply(this,arguments),arguments.length>0?this.init.apply(this,arguments):this};s.prototype=new o,s.prototype.constructor=s,s.prototype.defaultOptions={placeholder:"",selector:"",text:"",value:"",name:"",listTextKey:"",listValueKey:"",data:null},s.prototype.init=function(e){return this.options=e=n.extend({},this.defaultOptions,e),this.$element=n(e.selector).addClass("mz-selectmenu"),this.$show=n('<input type="text" readonly="readonly" tabindex="-1" class="mz-downmenu-input" />').appendTo(this.$element).attr("placeholder",e.placeholder).val(e.text),this.$value=n('<input type="hidden" tabindex="-1" />').appendTo(this.$element).val(e.value).attr("name",e.name),this.$downmenu=n('<div class="mz-downmenu" />').appendTo("body"),this.setDownmenu(e.data),this.bind(),this},s.prototype.bind=function(){var e=this;this.$show.on("click",function(t){var i=n.extend({},e.options);e.emit("click",i,t),e._setPosition(),e.$downmenu.slideDown(50,function(){e.emit("show",i,t)})}),this.$show.on("blur",function(){e.beforeClose=setTimeout(function(t){var i=n.extend({},e.options);e.$downmenu.slideUp(50,function(){e.emit("blur",i,t)})},200)}),this.$downmenu.on("scroll",function(){clearTimeout(e.beforeClose)}),n(window).on("scroll",function(){e.$element.is(":visible")&&e._setPosition()})},s.prototype._setPosition=function(){var e=this.$element.offset();this.$downmenu.css({top:e.top+this.$element.height(),left:e.left,width:this.$element.outerWidth()-2})},s.prototype.setData=function(e,t){if(void 0==e&&void 0==t)return this;if(void 0==e&&t){if(!this.listObject)return this;n.each(this.listObject,function(i,n){var o=this.options.listValueKey?n[this.options.listValueKey]:n;o==t&&(e=this.options.listTextKey?n[this.options.listTextKey]:i)}.bind(this))}else if(void 0==t&&e){if(!this.listObject)return this;n.each(this.listObject,function(i,n){var o=this.options.listTextKey?n[this.options.listTextKey]:i;o==e&&(t=this.options.listValueKey?n[this.options.listValueKey]:n)}.bind(this))}return this.$show.val(e),this.$value.val(t),this.options.value=t,this.options.text=e,this},s.prototype.getData=function(){var e=this;return{text:e.options.text,value:e.options.value}},s.prototype.setDownmenu=function(e){if(e){var t=this;return this.listObject=e,this.$ul=n('<ul class="mz-downmenu-list" />'),n.each(e,function(e,i){var o=this;this._text=t.options.listTextKey?this[t.options.listTextKey]:e,this._value=t.options.listValueKey?this[t.options.listValueKey]:i,n('<li class="mz-downmenu-item" />').appendTo(t.$ul).text(this._text).on("click",function(i){var s=n.extend({},t.options);t.emit("select",o._text,o._value,s,i,e),o._text!=t.options.text&&(t.$show.val(o._text),t.$value.val(o._value),t.options.value=o._value,t.options.text=o._text,t.emit("change",o._text,o._value,s,i,e)),t.$downmenu.slideUp(50)})}),this.$downmenu.html(this.$ul),this.emit("setDownmenu"),this}},s.prototype.clear=function(){return this.$value.val(""),this.$show.val(""),this.$downmenu.empty(),this.options.value="",this.options.text="",delete this.$ul,this},s.prototype.remove=function(){this.clear(),this.$show.remove(),this.$value.remove(),this.$downmenu.remove()},e.exports=s},1,function(e,t){e.exports='<div class="address-adder-content">\n  <div class="address-adder-row clearfix">\n    <div class="address-adder-title">收货人姓名<span class="address-adder-must">*</span></div>\n    <div class="mz-input-warp"><input type="text" class="mz-input address-adder-name" placeholder="姓名长度不超过15个文字" value="" maxlength="15" /></div>\n    <div class="address-adder-title">收货人手机号<span class="address-adder-must">*</span></div>\n    <div class="mz-input-warp"><input type="text" class="mz-input address-adder-phone" placeholder="请输入11位手机号" value="" maxlength="11" /></div>\n  </div>\n  <div class="address-adder-row clearfix">\n    <div class="address-adder-title">收货人地址<span class="address-adder-must">*</span></div>\n    <div class="mz-input-warp address-adder-select"></div>\n  </div>\n  <div class="address-adder-row clearfix address-adder-other">\n    <div class="address-adder-title">其他</div>\n  </div>\n  <div class="address-adder-row clearfix">\n    <div class="address-adder-title">详细地址<span class="address-adder-must">*</span></div>\n    <div class="mz-input-warp">\n      <input type="text" class="mz-input address-adder-detail" placeholder="请输入4-50个文字的详细地址，例如路名、门牌号" value="" maxlength="50" minlength="4" />\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<li class="order-address-checkbox add">\n  <div class="order-add-icon"></div>\n  <div class="order-address-add-text">添加新地址</div>\n</li>\n'},function(e,t){e.exports='<li class="order-address-checkbox <%= data.isOld ? \'disabled\' : data.isSelected ? \'checked\' : \'\' %>" data-mdesc="收货人信息" data-mtype="click_store_se_adr" data-bh="click_store_se_adr">\n<div class="order-address-checkbox-top">\n  <div class="order-address-checkbox-name" title="<%= data.receiver %>"><%= data.receiver %></div>\n  <div class="order-address-checkbox-phone"><%= data.telNumber %></div>\n</div>\n<div class="order-address-checkbox-content"><%= data.completeAddress %></div>\n<div class="order-address-checkbox-checked">\n  <div class="order-address-checkbox-tick"></div>\n</div>\n<% if (!data.useAppointAddr) { %>\n<div class="order-address-checkbox-ctrl">\n  <div class="order-address-checkbox-delete"></div>\n  <div class="order-address-checkbox-edit"></div>\n  </div>\n<% } %>\n<% if (data.isOld) { %>\n<div class="order-address-checkbox-tips">\n  因配送地址库升级，提交订单前，请务必完善地址信息，让您享受更好的配送服务。\n  <div class="order-address-checkbox-row">\n    <i class="order-address-checkbox-perfect"></i>\n  </div>\n</div>\n<% } %>\n</li>\n'},function(e,t,i){i(65);var n=i(8);i(67);var o=i(12),s=i(9),r=i(29),a=i(68),c=i(69),d=i(70),l=0,u={},p=[],h=[],v=!1,f=null,m=null,g=n("#orderProductList"),y=o.template(i(74)),b=o.template(i(75)),x=o.template(i(76)),k=o.template(i(77),{variable:"data"}),w=o.template(i(78)),C=function(e){if(0!==e.fastArrivalStatus){var t=a(new Date(e.payDate),"hh:mm");return y({fastArrivalStatus:e.fastArrivalStatus,text:1===e.fastArrivalStatus?"当日达":"次日达",beforeTime:"00:00"===t?"24:00":t,day:1===e.fastArrivalStatus?"今天":2===e.fastArrivalStatus?"明天":"后天",date:a(new Date(e.arrivalDate),"MM月dd日")})}return'<div class="order-product-arrival" />'},_=function(e,t,i,o,s){return i.skus={},e.map(function(e,a){var d=[];e.reduceName={0:"套餐优惠",1:"限时折扣优惠"},e.productIndex=a,e.merchantExpressFee=t,e&&e.theBinders&&e.theBinders.forEach(function(e){var t=(100*e.originPrice-100*e.price)/100;e._discount={name:"加价购",price:t},d.push({skuId:e.skuId,numbers:e.number})});var u={$selector:n(x({skuInfo:e,buyFrom:s})),number:e.number,skuId:e.skuId,index:a},p={skuId:e.skuId,numbers:e.number};if(d.length&&(p.theBinder=d,u.theBinder=d),e.packageId){u.packageId=e.packageId;var v=e.skuInfoBoList.map(function(e){return e.skuId});u.packageList=v.join(","),p.packageId=e.packageId,p.packageList=u.packageList,u.uniqueId=e.skuId+"-"+u.packageId+"-"+v.join("-")}else u.uniqueId=e.skuId;return e.presentInfo&&e.presentInfo.length&&(u.presentMark=1),i.skus[u.uniqueId]=u,e.activeTimeEnd&&"mosale"!==s&&(u.countdown=new r({step:1e3}).on("end",function(){h.push('"'+e.itemName+" "+e.cspuDesc+(e.packageId?" "+e.packageName:"")+'"')}).on("count",function(e){n(".order-product-countdown",u.$selector).text("限时特惠：剩余"+c(e).string)}).count(e.activeTimeEnd-l)),o.push(p),u.$selector})},I=function(e){e.invoiceDialog||(e.invoiceDialog=new d(e),e.invoiceDialog.on("invoiceSave",function(t){if("01"===t.invoiceOrg?(e._$invoiceEnterpriseLine||(e._$invoiceEnterpriseLine=n("<p />")),e._$invoiceEnterpriseLine.text(k(t)),n(".order-product-invoice-info",e.$selector).append(this._$invoiceEnterpriseLine)):e._$invoiceEnterpriseLine&&e._$invoiceEnterpriseLine.remove(),n(".order-product-invoice-title",e.$selector).text(t.invoiceTitle),t.invoiceIdentifySn){n(".order-product-company").show(),n(".order-product-invoice-identify",e.$selector).text(t.invoiceIdentifySn);var i=t.invoiceBank+" "+t.invoiceBankAccount;n(".order-product-invoice-bank",e.$selector).text(i)}else n(".order-product-company").hide();n.extend(e,t)})),e.invoiceDialog.show()},A=function(e,t){return e.map(function(e,i){var o=u[e.merchantId]={index:i,$selector:n(b({data:e,buyFrom:t})),invoiceType:e.merchantId>1e4?0:2,invoiceOrg:"03"};e.merchantId<1e4&&(f=e.merchantTotalMoney),1!==e.isNeedInvoice&&(o.invoiceType=0);var s={orderItems:[]};p.push(s),2!==o.invoiceType&&(o.invoiceTitle="个人",n(".order-product-invoice-checkbox",o.$selector).on("click",function(){o.invoiceType?(o.invoiceType=0,n(".order-product-invoice-info",o.$selector).addClass("hide")):(o.invoiceType=1,I(o),n(".order-product-invoice-info",o.$selector).removeClass("hide"))})),n(".order-product-invoice-edit",o.$selector).on("click",function(){I(o)}),n(".order-product-remark-input",o.$selector).on("input propertychange",function(){o.remark=n(this).val()}),e.skuInfo.merchantId=e.merchantId,n("tbody",o.$selector).append(_(e.skuInfo,e.merchantExpressFee,o,s.orderItems,t));var r=n("tbody .order-product-table-express",o.$selector);return e.supportFastArrival&&(v=!0,o.$arrival=n(C(e.fastArrival)),r.append(o.$arrival)),e.skuInfo[0].preSale&&r.append(n(w({day:e.skuInfo[0].preSaleDesc}))),o.$selector})},$=function(){g.on("click",".order-product-invoice-icon",function(){m||(m=new s({type:"msg",title:"电子发票详细介绍",content:i(79),buttons:[]})),m.show()})},T=function(e){n(".has-express-fee").text(e.toFixed(2)),f&&n(".total-has-express-fee").text((f+e).toFixed(2))},P=function(){return h},D=function(){return u},O=function(){return v},S=function(){return p},E=function(e,t,i){l=t,g.html(A(e,i)),n("img[data-original]",g).lazyload(),$()};e.exports={init:E,setArrival:C,getCountEndProd:P,reviseExpressFee:T,getProductStaticData:S,getSupportFastArrival:O,getProductPointer:D}},1,,function(e,t){!function(e,t,i,n){var o=e(t);e.fn.lazyload=function(s){function r(){var t=0;c.each(function(){var i=e(this);if(!d.skip_invisible||i.is(":visible"))if(e.abovethetop(this,d)||e.leftofbegin(this,d));else if(e.belowthefold(this,d)||e.rightoffold(this,d)){if(++t>d.failure_limit)return!1}else i.trigger("appear"),t=0})}var a,c=this,d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!1,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return s&&(n!==s.failurelimit&&(s.failure_limit=s.failurelimit,delete s.failurelimit),n!==s.effectspeed&&(s.effect_speed=s.effectspeed,delete s.effectspeed),e.extend(d,s)),a=d.container===n||d.container===t?o:e(d.container),0===d.event.indexOf("scroll")&&a.bind(d.event,function(){return r()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.attr("src")!==n&&i.attr("src")!==!1||i.is("img")&&i.attr("src",d.placeholder),i.one("appear",function(){if(!this.loaded){if(d.appear){var n=c.length;d.appear.call(t,n,d)}e("<img />").bind("load",function(){var n=i.attr("data-"+d.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[d.effect](d.effect_speed),t.loaded=!0;var o=e.grep(c,function(e){return!e.loaded});if(c=e(o),d.load){var s=c.length;d.load.call(t,s,d)}}).attr("src",i.attr("data-"+d.data_attribute))}}),0!==d.event.indexOf("scroll")&&i.bind(d.event,function(){t.loaded||i.trigger("appear")})}),o.bind("resize",function(){r()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&o.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&c.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){r()}),this},e.belowthefold=function(i,s){var r;return r=s.container===n||s.container===t?(t.innerHeight?t.innerHeight:o.height())+o.scrollTop():e(s.container).offset().top+e(s.container).height(),r<=e(i).offset().top-s.threshold},e.rightoffold=function(i,s){var r;return r=s.container===n||s.container===t?o.width()+o.scrollLeft():e(s.container).offset().left+e(s.container).width(),r<=e(i).offset().left-s.threshold},e.abovethetop=function(i,s){var r;return r=s.container===n||s.container===t?o.scrollTop():e(s.container).offset().top,r>=e(i).offset().top+s.threshold+e(i).height()},e.leftofbegin=function(i,s){var r;return r=s.container===n||s.container===t?o.scrollLeft():e(s.container).offset().left,r>=e(i).offset().left+s.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document)},function(e,t){e.exports=function(e,t){t=t||"yyyy-MM-dd hh:mm:ss";var i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return t}},function(e,t){e.exports=function(e){var t=parseInt(e/864e5,10),i=parseInt((e-864e5*t)/36e5,10),n=parseInt((e-864e5*t-36e5*i)/6e4,10),o=parseInt((e-864e5*t-36e5*i-6e4*n)/1e3,10);t=t>0?t<10?"0"+t:t:0,i=i>0?i<10?"0"+i:i:0,n=n>0?n<10?"0"+n:n:0,o=o>0?o<10?"0"+o:o:0;var s=t>0?" "+t+"天"+i+"时"+n+"分"+o+"秒 ":i>0?" "+i+"时"+n+"分"+o+"秒 ":n>0?n+"分"+o+"秒 ":o+"秒 ";return{day:t,hour:i,minute:n,second:o,string:s}}},function(e,t,i){i(71);var n=i(8),o=i(12),s=i(9),r=i(59),a=o.template(i(72),{variable:"data"}),c=o.template(i(73),{variable:"data"}),d="data-tips",l="tips",u=/^[\u4E00-\u9FA5A-Za-z0-9_\-\(\)\（\）]+$/,p=/^\d*-?\d{7,12}$/,h=/^\d{9,23}$/,v=[{text:"企业",value:"01",placeholder:"请输入企业抬头全称"},{text:"机关事业单位",value:"02",placeholder:"请输入发票抬头全称"},{text:"个人",value:"03",placeholder:"默认收货人姓名"},{text:"其他",value:"04",placeholder:"请输入发票抬头全称"}],f=[{text:"增值税普通发票",value:"01"},{text:"增值税专用发票",value:"05"}],m=function(e){this.invoiceOptions=n.extend({},this.defaultInvoiceOptions,e),"business"===this.invoiceOptions.type&&(this.invoiceOptions=n.extend(this.invoiceOptions,{template:c,menuData:f,defaultMenuText:f[0].text,defaultMenuValue:f[0].value})),this._$invoiceContent=n(this.invoiceOptions.template(this.invoiceOptions)),s.call(this,{title:"发票信息",className:"order-invoice-dialog",content:this._$invoiceContent}),this._$invoiceName=n("[name=name]",this._$invoiceContent),this._$invoiceIdentifySn=n("[name=identifySn]",this._$invoiceContent),this._$invoiceBank=n("[name=bank]",this._$invoiceContent),this._$invoiceBankAccount=n("[name=bankAccount]",this._$invoiceContent),this._$invoiceEnterprise=n(".order-invoice-dialog-enterprise",this._$invoiceContent),this._select=new r({selector:n(".order-invoice-dialog-type",this._$invoiceContent),text:this.invoiceOptions.defaultMenuText,value:this.invoiceOptions.defaultMenuValue,listTextKey:"text",listValueKey:"value",data:this.invoiceOptions.menuData}),"business"===this.invoiceOptions.type?(this._$invoiceAddress=n("[name=address]",this._$invoiceContent),this._$invoicePhone=n("[name=phone]",this._$invoicePhone),this._$invoiceAppreciation=n(".order-invoice-dialog-appreciation",this._$invoiceContent),this._select.on("change",function(e,t){"01"===t?this._$invoiceAppreciation.hide():"05"===t&&this._$invoiceAppreciation.show(),this.setPosition()}.bind(this))):this._select.on("change",function(e,t,i,n,o){this._$invoiceName.attr({placeholder:v[o].placeholder,disabled:"03"===t&&2===this.options.invoiceType}),"03"===t&&2===this.invoiceType&&this._$invoiceName.val(""),"01"===t?this._$invoiceEnterprise.show():this._$invoiceEnterprise.hide(),this.setPosition()}.bind(this)),this.on("beforeSuccess",this.handleBeforeClose)};m.prototype=new s,m.prototype.constructor=m,m.prototype.show=function(){s.prototype.show.call(this).setPosition()},m.prototype.handleContextError=function(e,t,i){this[e].parent().attr(d,t).addClass(l),i()},m.prototype.defaultInvoiceOptions={template:a,menuData:v,defaultMenuText:v[2].text,defaultMenuValue:v[2].value},m.prototype.resetContent=function(){this._$invoiceName.val(""),this._$invoiceIdentifySn.val(""),this._$invoiceBank.val(""),this._$invoiceBankAccount.val(""),"business"===this.invoiceOptions.type&&(this._$invoiceAddress.val(""),this._$invoicePhone.val(""),this._select.setData(f[0].text,f[0].value))},m.prototype.handleBeforeClose=function(e){var t=this._select.getData().value,i={invoiceOrg:t,invoiceIdentifySn:"",invoiceBank:"",invoiceBankAccount:"",invoiceAddress:"",invoicePhone:"",invoiceTitle:"03"===t&&2===this.invoiceType?"默认为收货人姓名":n.trim(this._$invoiceName.val())};if(!i.invoiceTitle||!u.test(i.invoiceTitle))return this.handleContextError("_$invoiceName","请输入正确的发票抬头",e);if(this._$invoiceName.parent().removeClass(l),"01"===i.invoiceOrg||"05"===i.invoiceOrg){if(i.invoiceIdentifySn=this._$invoiceIdentifySn.val(),i.invoiceBank=this._$invoiceBank.val(),i.invoiceBankAccount=this._$invoiceBankAccount.val(),!i.invoiceIdentifySn||!u.test(i.invoiceIdentifySn))return this.handleContextError("_$invoiceIdentifySn","请输入正确的纳税人识别号",e);if(this._$invoiceIdentifySn.parent().removeClass(l),!i.invoiceBank||!u.test(i.invoiceBank))return this.handleContextError("_$invoiceBank","请输入正确的开户行",e);if(this._$invoiceBank.parent().removeClass(l),!i.invoiceBankAccount||!h.test(i.invoiceBankAccount))return this.handleContextError("_$invoiceBankAccount","请输入正确的开户行账号",e);this._$invoiceBankAccount.parent().removeClass(l)}if("05"===i.invoiceOrg){if(i.invoiceAddress=this._$invoiceAddress.val(),i.invoicePhone=this._$invoicePhone.val(),!i.invoiceAddress||!u.test(i.invoiceAddress))return this.handleContextError("_$invoiceAddress","请输入正确的注册地址",e);if(this._$invoiceAddress.parent().removeClass(l),!i.invoicePhone||!p.test(i.invoicePhone))return this.handleContextError("_$invoicePhone","请输入正确的注册电话",e);this._$invoicePhone.parent().removeClass(l)}this.emit("invoiceSave",i)},e.exports=m},1,function(e,t){e.exports='<div class="order-invoice-dialog-content">\n  <div class="order-invoice-dialog-row clearfix">\n    <div class="order-invoice-dialog-title must">发票类型</div>\n    <div class="order-invoice-dialog-content">\n      <% if (data.invoiceType === 2) { %>\n      <p class="order-invoice-dialog-content-wrap">电子发票</p>\n      <p class="order-invoice-dialog-desc">电子发票是税局认可的有效凭证，其法律效力、基本用途及使用规定同纸质发票。</p>\n      <% } else { %>\n      <p class="order-invoice-dialog-content-wrap">纸质发票</p>\n      <% } %>\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix">\n    <div class="order-invoice-dialog-title must">发票抬头</div>\n    <div class="order-invoice-dialog-content">\n      <span class="order-invoice-dialog-type"></span>\n      <span class="mz-input-warp order-invoice-dialog-name">\n        <% if (data.invoiceType === 2) { %>\n        <input type="text" class="mz-input" disabled placeholder="默认发货人姓名" maxlength="45" name="name" value="">\n        <% } else { %>\n        <input type="text" class="mz-input" placeholder="默认发货人姓名" maxlength="45" name="name" value="个人">\n        <% } %>\n      </span>\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-enterprise">\n    <div class="order-invoice-dialog-title must">纳税人识别号</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入纳税人识别号" maxlength="20" name="identifySn">\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-enterprise">\n    <div class="order-invoice-dialog-title">开户行</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入开户行全称" maxlength="50" name="bank">\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-enterprise">\n    <div class="order-invoice-dialog-title">开户行账号</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入开户行账号" maxlength="50" name="bankAccount">\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="order-invoice-dialog-content order-invoice-dialog-business">\n  <div class="order-invoice-dialog-row clearfix">\n    <div class="order-invoice-dialog-title must">发票类型</div>\n    <div class="order-invoice-dialog-content">\n      <p class="order-invoice-dialog-content-wrap">纸质发票</p>\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix">\n    <div class="order-invoice-dialog-title must">增票类型</div>\n    <div class="order-invoice-dialog-content">\n      <span class="order-invoice-dialog-type"></span>\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix">\n    <div class="order-invoice-dialog-title must">发票抬头</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入企业抬头全称" maxlength="45" name="name" value="" />\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-enterprise">\n    <div class="order-invoice-dialog-title must">纳税人识别号</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入纳税人识别号" maxlength="20" name="identifySn">\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-enterprise">\n    <div class="order-invoice-dialog-title must">开户行</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入开户行全称" maxlength="50" name="bank">\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-enterprise">\n    <div class="order-invoice-dialog-title must">开户行账号</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入开户行账号" maxlength="50" name="bankAccount">\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-appreciation">\n    <div class="order-invoice-dialog-title must">注册地址</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入开户行账号" maxlength="50" name="address">\n    </div>\n  </div>\n  <div class="order-invoice-dialog-row clearfix order-invoice-dialog-appreciation">\n    <div class="order-invoice-dialog-title must">注册电话</div>\n    <div class="order-invoice-dialog-content mz-input-warp">\n      <input type="text" class="mz-input" placeholder="请输入开户行账号" maxlength="13" name="phone">\n    </div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="order-product-arrival">\n  <% if (fastArrivalStatus !== 3) { %>\n  <p><i class="order-product-arrival-icon"></i><%= text %></p>\n  <% } %>\n  <p><%= beforeTime %>前下单并支付，</p>\n  <p>预计<strong><%= day %>（<%= date %>）</strong>送达</p>\n</div>\n'},function(e,t){e.exports='<table cellpadding="0" cellspacing="0" class="order-product-table">\n  <thead>\n  <tr>\n    <th class="order-product-table-name">\n      <div class="order-product-supplier">\n        供应商：<span class="order-product-supplier-name"><%= data.merchantName %></span>\n        <!--<div class="order-product-supplier-tips">由“<%= data.merchantName %>”负责发货，并提供售后服务</div>-->\n      </div>\n    </th>\n    <th class="order-product-table-price">单价</th>\n    <th class="order-product-table-num">数量</th>\n    <th class="order-product-table-total">小计</th>\n    <th class="order-product-table-express table-express-header">配送方式</th>\n  </tr>\n  </thead>\n  <tbody></tbody>\n  <tfoot>\n  <tr class="order-product-footer">\n    <td colspan="3" class="order-product-info">\n      <% if (buyFrom !== \'mosale\') { %>\n      <div class="order-product-invoice clearfix">\n        <% if (data.isNeedInvoice === 1) { // 魅友卡 是否显示开具发票 %>\n          <% if (data.merchantId > 10000) { // 非魅族自营 纸质发票 %>\n          <label for="invoiceNo<%= data.merchantId %>" class="order-product-invoice-label">\n            <input class="order-product-invoice-checkbox" type="checkbox" id="invoiceNo<%= data.merchantId %>">\n            开具发票\n          </label>\n          <% } else { %>\n          <div class="order-product-invoice-type">\n            发票类型：电子发票<div class="order-product-invoice-icon"></div>\n          </div>\n          <% } %>\n          <span class="order-product-invoice-edit">修改</span>\n          <div class="order-product-invoice-info<%= data.merchantId > 10000 ? \' hide\' : \'\' %>">\n            <p>发票抬头：<span class="order-product-invoice-title"><%= data.merchantId > 10000 ? \'个人\' : \'默认为收货人姓名\' %></span>\n            </p>\n            <p class="order-product-company">纳税人识别号：<span class="order-product-invoice-identify"></span></p>\n            <p class="order-product-company">开户行及账号：<span class="order-product-invoice-bank"></span></p>\n          </div>\n        </div>\n        <% } %>\n      <% } %>\n    </td>\n    <td colspan="2" class="order-product-total">\n      合计：<span class="order-product-price red <%= data.merchantId > 10000 ? \'\' : \'total-has-express-fee\' %>"><%= data.merchantTotalMoney.toFixed(2) %></span>\n    </td>\n  </tr>\n  <tr class="order-product-remark">\n    <td colspan="5">\n      <span class="order-product-remark-title">备注：</span>\n      <textarea class="order-product-remark-input" maxlength="45"></textarea>\n    </td>\n  </tr>\n  </tfoot>\n</table>\n'},function(e,t){e.exports='<tr>\n  <td class="order-product-table-name">\n    <a target="_blank" class="order-product-link" href="<%= skuInfo.itemUrl %>" data-mdesc="确认订单信息" data-mtype="click_store_se_ord" data-bh="click_store_se_ord">\n      <img class="order-product-image" data-original="<%= skuInfo.image %>@120x120.jpg">\n    </a>\n    <div class="order-product-name">\n      <a target="_blank" class="order-product-link" href="<%= skuInfo.itemUrl %>" data-mdesc="确认订单信息" data-mtype="click_store_se_ord" data-bh="click_store_se_ord">\n        <p class="order-product-name-item item-name"><%= skuInfo.itemName %></p>\n        <p class="order-product-name-item cspu-desc"><%= skuInfo.cspuDesc %></p>\n        <% if (skuInfo.packageName) { %>\n        <p class="order-product-name-item order-product-group"><%= skuInfo.packageName %></p>\n        <% } %>\n      </a>\n    </div>\n  </td>\n  <td class="order-product-table-price">\n    <p>\n      <span class="order-product-price"><%= skuInfo.totalPrice.toFixed(2) %></span>\n      <% if (skuInfo.reduceMoney > 0 && buyFrom !== \'mosale\') { %>\n      <span class="order-product-price cancel"><%= skuInfo.totalOriginPrice.toFixed(2) %></span>\n      <% } %>\n    </p>\n    <% if (skuInfo.reduceItems && buyFrom !== \'mosale\') { %>\n    <div>\n      <div class="order-product-discount<%= skuInfo.reduceItems.length > 1 ? \' more\' : \'\' %>">\n        <div class="order-product-discount-title">\n          <%= skuInfo.reduceItems.length > 1 ? \'优惠\' : skuInfo.reduceName[skuInfo.reduceItems[0].type] %>:\n          <span class="order-product-price sub"><%= skuInfo.reduceMoney.toFixed(2) %></span>\n          <% if (skuInfo.reduceItems.length > 1) { %>\n          <i class="order-product-discount-triangle"></i>\n          <% } %>\n        </div>\n        <% if (skuInfo.reduceItems.length > 1) { %>\n        <ul class="order-product-discount-downmenu">\n          <% skuInfo.reduceItems.forEach(function (reduce) {  %>\n          <li class="order-product-discount-item">\n            <%= skuInfo.reduceName[reduce.type]%>\n            <span class="order-product-price sub"><%= reduce.price.toFixed(2) %></span>\n          </li>\n          <% }) %>\n        </ul>\n        <% } %>\n      </div>\n    </div>\n    <% } %>\n    <% if (skuInfo.activeTimeEnd && buyFrom !== \'mosale\') { %>\n    <p class="order-product-countdown"></p>\n    <% } %>\n  </td>\n  <td class="order-product-table-num"><%= skuInfo.number %></td>\n  <td class="order-product-table-total">\n    <p class="order-product-price red"><%= skuInfo.payMoney.toFixed(2) %></p>\n  </td>\n  <% if (skuInfo.productIndex === 0) { %>\n  <td class="order-product-table-express" rowspan="999">\n    <p>\n      快递配送：运费<span class="order-product-price red express-fee <%= skuInfo.merchantId > 10000 ? \'\' : \'has-express-fee\' %>"><%= skuInfo.merchantExpressFee.toFixed(2) %></span>\n    </p>\n  </td>\n  <% } %>\n</tr>\n\n<!-- 套餐 -->\n<% skuInfo.skuInfoBoList.forEach(function (boItem, index) { %>\n<tr class="order-product-table-child<%= index === 0 ? \' first\' : \'\' %>">\n  <td class="order-product-table-name" colspan="4">\n    <a target="_blank" class="order-product-link" href="<%= boItem.itemUrl %>" data-mdesc="确认订单信息" data-mtype="click_store_se_ord" data-bh="click_store_se_ord">\n      <img class="order-product-image" data-original="<%= boItem.image %>@120x120.jpg">\n    </a>\n    <div class="order-product-name">\n      <a target="_blank" class="order-product-link" href="<%= boItem.itemUrl %>" data-mdesc="确认订单信息" data-mtype="click_store_se_ord" data-bh="click_store_se_ord">\n        <%= boItem.name %>\n      </a>\n    </div>\n  </td>\n</tr>\n<% }) %>\n\n<!-- 赠品 -->\n<% if (skuInfo.presentInfo) { %>\n<% skuInfo.presentInfo.forEach(function (present) { %>\n<tr class="order-product-table-child">\n  <td class="order-product-table-name" colspan="4">\n    <a class="order-product-link">\n      <img class="order-product-image" data-original="<%= present.image %>@120x120.jpg">\n    </a>\n    <div class="order-product-name">\n      <a class="order-product-link">\n        <p class="order-product-name-item item-name">【赠品】<%= present.showName %></p>\n        <% if (present.type === 1) { %>\n        <p class="order-product-name-item cspu-desc">付款后选号领取</p>\n        <% } %>\n      </a>\n    </div>\n  </td>\n</tr>\n<% }) %>\n<% } %>\n\n<!-- 加价购商品 -->\n<% if (skuInfo.theBinders) { %>\n<% skuInfo.theBinders.forEach(function (binder, index) { %>\n<tr class="order-product-table-binder">\n  <td class="order-product-table-name">\n    <a target="_blank" class="order-product-link" href="<%= binder.itemUrl %>" data-mdesc="确认订单信息" data-mtype="click_store_se_ord" data-bh="click_store_se_ord">\n      <img class="order-product-image" data-original="<%= binder.image %>@120x120.jpg">\n    </a>\n    <div class="order-product-name">\n      <a target="_blank" class="order-product-link" href="<%= binder.itemUrl %>">\n        <p class="order-product-name-item item-name"><%= binder.name %></p>\n        <p class="order-product-name-item cspu-desc"><%= binder.cspuDesc %></p>\n      </a>\n    </div>\n  </td>\n  <td class="order-product-table-price">\n    <p>\n      <span class="order-product-price"><%= binder.price.toFixed(2) %></span>\n      <% if (binder.originPrice > binder.price && buyFrom !== \'mosale\') { %>\n      <span class="order-product-price cancel"><%= binder.originPrice.toFixed(2) %></span>\n      <% } %>\n    </p>\n    <div class="order-product-discount">\n      <span class="order-product-discount-title">\n        <%= binder._discount.name %>:\n        <span class="order-product-price sub">\n        <%= binder._discount.price.toFixed(2) %>\n        </span>\n      </span>\n    </div>\n  </td>\n  <td class="order-product-table-num"><%= binder.number %></td>\n  <td class="order-product-table-total">\n    <p class="order-product-price red"><%= binder.price.toFixed(2) %></p>\n  </td>\n</tr>\n<% }) %>\n<% } %>\n';
},function(e,t){e.exports="纳税人识别号：<%= data.invoiceIdentifySn %>\n<% if (data.invoiceBank || data.invoiceBankAccount) { %>\n开户行及账号：<%= data.invoiceBank %> <%= data.invoiceBankAccount.replace(/(.{4})/g, '$1 ') %>\n<% } %>\n"},function(e,t){e.exports='<p>\n  配送方式：<i class="order-font presale"></i>预售商品\n</p>\n<p class="order-product-presale-desc">\n  付款后预计<%= day %>天内发货\n</p>\n'},function(e,t){e.exports='<ul class="einvoice-detail">\n  <li class="q">为什么要选择电子发票？</li>\n  <li class="a">电子发票是纳税义务人通过互联网录入数据，然后开具给客户。电子发票获取更便捷，可重复下载，避免丢失，方便查验，售后维权更有保障。发货效率更高，退换货更方便！电子发票低碳环保，节能减排，符合加强环境保护的国家策略。选择电子发票，省力省心，更能为环境保护贡献一份力。</li>\n  <li class="q">确保电子发票具有法律效力的相关规定有哪些?</li>\n  <li class="a">根据国家税务总局关于推行通过增值税电子发票系统开具的增值税电子普通发票有关问题的公告（国家税务总局公告2015年第84号）的规定，自2016年1月1日起启用。增值税电子普通发票的开票方和受票方需要纸质发票的，可以自行打印增值税电子普通发票的版式文件，其法律效力、基本用途、基本使用规定等与税务机关监制的增值税普通发票相同。</li>\n  <li class="q">怎样收到电子发票？</li>\n  <li class="a">2016年1月1日及之后发货的订单，电子发票将在订单发货后，由系统自动发送到收货人的手机，请留意查收；如未收到，请联系客服热线:400-788-3333或进入官网咨询：<a class="einvoice-detail-link" href="https://mwx-api.meizu.com/live-service" target="_blank">在线客服</a>，无需操作后台；2016年1月1日前发货的订单，可在官网商城用户订单详情中查看发票信息。</li>\n  <li class="q">想要传统纸质发票怎么办？</li>\n  <li class="a">魅族商城正式启用电子发票后，不支持自主更换纸质发票。</li>\n  <li class="q">电子发票短信误删了怎么办？</li>\n  <li class="a">用户可联系客服索取电子发票信息，客服热线:400-788-3333或进入官网咨询：<a class="einvoice-detail-link" href="https://mwx-api.meizu.com/live-service" target="_blank">在线客服</a>。</li>\n  <li class="q">电子发票是否可以用于报销？</li>\n  <li class="a">电子发票打印后可用于单位报销。</li>\n  <li class="q">电子发票在哪里下载和打印？</li>\n  <li class="a">2016年1月1日及之后发货的订单，电子发票用户可以登录<a class="einvoice-detail-link" href="http://t.cn/R4cdnja" target="_blank">http://t.cn/R4cdnja</a> 凭借短信信息查询电票发票。 2016年1月1日前发货的订单，电子发票依旧在<a class="einvoice-detail-link" href="http://t.cn/Rzm3kyC" target="_blank">http://t.cn/Rzm3kyC</a> 查询。</li>\n  <li class="q">选择开具电子发票的顾客如何办理退换货流程？</li>\n  <li class="a">和原有退换货流程一样，唯一区别是电子发票的用户在办理退换货时无需用户退回电子发票，我司直接按电子发票冲红处理。</li>\n  <li class="q">电子发票可以修改发票抬头吗？</li>\n  <li class="a">目前电子发票抬头默认为收货人姓名，如需修改，请联系客服热线:400-788-3333或进入官网咨询：<a class="einvoice-detail-link" href="https://mwx-api.meizu.com/live-service" target="_blank">在线客服</a>。</li>\n</ul>\n'},function(e,t,i){i(81);var n=i(8),o=i(12),s=i(13),r=new s,a=i(64),c=i(82),d=i(85),l=i(88),u=i(91),p=i(32),h=null,v=null,f=null,m=null,g=null,y=null,b=n("#discount"),x=n("#discountList"),k=o.template(i(99)),w=o.template(i(100)),C=o.template(i(101),{variable:"data"}),_=".order-discount-item-right",I=".order-discount-item-title",A=".order-discount-item-header",$=".order-discount-item-content",T=function(e,t){e=n(e);var i=n(w({msg:t})).css({display:"none"}).appendTo(e).fadeIn(400);setTimeout(function(){i.fadeOut(400)},2e3)},P=function(){x.on("click",A,function(){var e=n(this).parent(),t=e.data("type"),i=n(this).siblings($),o=e.hasClass("open"),s=function(e,t){var i=t.siblings(".open");i.children($).stop(!1,!0).slideUp(400,function(){i.removeClass("open")}),e.stop(!1,!0).slideDown(400),t.addClass("open")};o?i.stop(!1,!0).slideUp(400,function(){i.parent().removeClass("open")}):"repo"!==t||l.getRepoState()?s(i,e):O().then(function(){s(i,e)})}),c.on("updatePrice",function(e){n(_,h).html(e>0?C({price:e}):""),p.setPrice("coupon",e),O().then()}),c.on("error",T),d.on("updatePrice",function(e){n(_,f).html(e>0?C({price:e}):""),p.setPrice("red",e),O().then()}),d.on("error",T),u.on("updatePrice",function(e){O(e).then()}),u.on("error",T),l.on("updatePrice",function(e,t){n(_,v).html(e>0?C({price:e,desc:t&&t>0?"（含魅族补贴）":""}):""),p.setPrice("repo",e)}),l.on("error",T),l.on("updateExpressFee",function(e){e>=0&&(p.setPrice("express",e),a.reviseExpressFee(e))})},D=function(e){n(_,m).html(e>0?C({price:e}):""),p.setPrice("gift",e)},O=function(e){var t={skillTicket:g,sourceTime:y,buyInfos:JSON.stringify(a.getProductStaticData()),couponAcquirementId:c.getUseCouponId(),redEnvelopeAcquirementId:d.getUseRedId()};if(u.isHasGiftCard()){var i=0;(0!==e&&!u.isUncheckedCanUsed()||e)&&(i=u.isGiftOverPrice(e||u.getGiftPrice()),i&&(t.giftCardId=u.getUseGiftNumAndId().useGiftId,t.giftCardPwd=u.getUseGiftNumAndId().userGiftPwd)),D(i)}return l.updateRepoData(t,!1)},S=function(e){if(P(),g=e.skillTicket,y=e.sourceTime,h=n(k({mdesc:"优惠券",bh:"click_store_se_coupon",mtype:"click_store_se_coupon",className:"order-discount-coupon"})).data("type","coupon"),c.init(e.discountCoupons,n($,h)),c.getCouponState()){n(I,h).text("使用优惠券"),h.appendTo(x);var t=c.getCouponPrice();t&&(n(_,h).html(C({price:t})),p.setPrice("coupon",t))}f=n(k({mdesc:"红包",bh:"click_store_se_rcoupon",mtype:"click_store_se_rcoupon",className:"order-discount-red"})).data("type","red"),d.init(e.redCoupons,n($,f)),d.getRedState()&&(n(I,f).text("使用红包"),f.appendTo(x)),v=n(k({mdesc:"回购金",bh:"store_se_bcoupon",mtype:"store_se_bcoupon",className:"order-discount-repo"})).data("type","repo");var i=l.init(n($,v),{skillTicket:g,sourceTime:y,buyInfos:JSON.stringify(a.getProductStaticData()),couponAcquirementId:c.getUseCouponId(),redEnvelopeAcquirementId:d.getUseRedId()});n(I,v).text("使用回购金"),v.appendTo(x),i.then(function(){v.addClass("open")}).fail(function(){c.getCouponState()&&h.addClass("open")}),m=n(k({mdesc:"礼品卡",bh:"store_se_bcoupon",mtype:"store_se_bcoupon",className:"order-discount-gift"})).data("type","gift"),u.init(n($,m)),n(I,m).text("使用礼品卡"),m.appendTo(x),b.show()};e.exports={init:S,coupon:c,red:d,repo:l,gift:u,on:r.on.bind(r)}},1,function(e,t,i){i(83);var n=i(8),o=i(12),s=i(13),r=i(68),a=i(32),c=a.checkSelectedPriceOver,d=null,l=!1,u=0,p={},h=new s,v=n('<ul class="order-discount-coupon-list clearfix" />'),f=o.template(i(84)),m=function(){n.each(p,function(){n(this).removeClass("checked")}),d=null,u=0,h.emit("updatePrice",u)},g=function(e){return e.startDate=r(new Date(e.start),"yyyy.MM.dd"),e.endDate=r(new Date(e.end),"yyyy.MM.dd"),p[e.couponAcquirementId]=n(f(e)).on("click",function(t){if(n(t.target).hasClass("order-discount-coupon-range-link"))return window.open("//lists.meizu.com/page/couponItems/"+e.couponId+".html","_blank"),!1;if(n(this).hasClass("checked"))n(this).removeClass("checked"),d=null,u=0,h.emit("updatePrice",u);else{var i=c(e.reductionQuotaValue,["coupon","gift","repo"]);i?h.emit("error","body","抵扣金额超过订单金额"):(n(this).addClass("checked").siblings(".checked").removeClass("checked"),d=e.couponAcquirementId,u=e.reductionQuotaValue,h.emit("updatePrice",u))}}),p[e.couponAcquirementId]},y=function(e,t){return t.reductionQuotaValue-e.reductionQuotaValue},b=function(e){var t=0,i=null,o=[],s=[];n.each(e,function(e,t){1===t.couponType?o.push(t):s.push(t)}),o.sort(y),s.sort(y),e=o.concat(s);var r=n.map(e,function(e){var n=c(e.reductionQuotaValue,"coupon");return!n&&e.reductionQuotaValue>t&&(t=e.reductionQuotaValue,i=e.couponAcquirementId),g(e)});return i&&(p[i].addClass("checked"),d=i,u=t),r},x=function(){return l},k=function(e,t){if(e&&e.length){l=!0;var i=b(e);v.append(i),t.html(v)}},w=function(){return d},C=function(){return u};e.exports={init:k,on:h.on.bind(h),clearCoupon:m,getCouponState:x,getUseCouponId:w,getCouponPrice:C}},1,function(e,t){e.exports='<li class="order-discount-coupon-item">\n  <div class="order-discount-coupon-footer">\n    <div class="order-discount-coupon-radio"></div>\n  </div>\n  <div class="order-discount-coupon-tick <%= couponType == 1 ? \'single\' : \'\' %>">\n    <div class="order-discount-coupon-type"><%= couponType == 1 ? \'单品券\' : \'多品券\' %></div>\n    <div class="order-discount-coupon-left clearfix">\n      <div class="order-discount-coupon-price"><%= reductionQuotaValue %></div>\n      <div class="order-discount-coupon-desc">满<%= consumptionQuota %>可用</div>\n    </div>\n    <div class="order-discount-coupon-right">\n      <div class="order-discount-coupon-title" title="<%= name %>优惠券"><%= name %>优惠券</div>\n      <div class="order-discount-coupon-time"><%= startDate %> - <%= endDate %></div>\n      <div class="clearfix">\n        <div class="order-discount-coupon-range-text" title="适用范围：<%= itemDesc %>">适用：<%= itemDesc %></div>\n        <a class="order-discount-coupon-range-link">查看适用></a>\n      </div>\n    </div>\n  </div>\n</li>\n'},function(e,t,i){i(86);var n=i(8),o=i(12),s=i(13),r=i(68),a=i(32),c=a.checkSelectedPriceOver,d=!1,l=new s,u=0,p=null,h={},v=o.template(i(87)),f=n('<ul class="order-discount-red-list clearfix" />'),m=function(){n.each(h,function(){n(this).removeClass("checked")}),p=null,u=0,l.emit("updatePrice",u)},g=function(e){return e.startDate=r(new Date(e.start),"yyyy.MM.dd"),e.endDate=r(new Date(e.end),"yyyy.MM.dd"),h[e.redEnvelopeAcquirementId]=n(v(e)).on("click",function(){if(n(this).hasClass("checked"))n(this).removeClass("checked"),p=null,u=0,l.emit("updatePrice",u);else{var t=c(e.quotaValue,["red","gift","repo"]);t?l.emit("error","body","抵扣金额超过订单金额"):(n(this).addClass("checked").siblings(".checked").removeClass("checked"),p=e.redEnvelopeAcquirementId,u=e.quotaValue,l.emit("updatePrice",u))}}),h[e.redEnvelopeAcquirementId]},y=function(e){return e.sort(function(e,t){return t.quotaValue-e.quotaValue}),n.map(e,g)},b=function(){return d},x=function(e,t){e&&e.length&&(d=!0,f.append(y(e)),t.html(f))},k=function(){return p};e.exports={init:x,on:l.on.bind(l),clearRed:m,getRedState:b,getUseRedId:k}},1,function(e,t){e.exports='<li class="order-discount-red-item">\n  <div class="order-discount-red-footer">\n    <div class="order-discount-red-radio"></div>\n  </div>\n  <div class="order-discount-red-tick">\n    <div class="order-discount-red-price"><%= quotaValue %></div>\n    <div class="order-discount-red-right">\n      <div class="order-discount-red-name" title="<%= name %>红包"><%= name %>红包</div>\n      <div class="order-discount-red-time"><%= startDate %> - <%= endDate %></div>\n      <div class="order-discount-red-desc">适用：<%= description %></div>\n    </div>\n  </div>\n</li>\n'},function(e,t,i){i(89);var n=i(8),o=i(12),s=i(9),r=i(30)(),a=i(15),c=i(13),d=o.template(i(90),{variable:"repo"}),l=new c,u=null,p=!1,h=!1,v=0,f=0,m=new s({type:"tips",title:"提示"}),g=function(){return p},y=function(){return h&&v+f!==0},b=function(e){e.used=h,v=e.use||0,f=e.subsidy||0,u.html(d(e)),h&&l.emit("updatePrice",v+f,f)},x=function(){n("#orderDiscountRepoNotUse",u).click()},k=function(){u.on("click","[name=orderDiscountRepo]",function(){var e=Number(n(this).val());e?(h=!0,l.emit("updatePrice",v+f,f)):(h=!1,l.emit("updatePrice",0))})},w=function(e){var t={};return Object.keys(e).forEach(function(i){e[i]&&(t[i]=e[i])}),t},C=function(e,t){var i=new n.Deferred;return r.get(function(o,s){return o?(i.reject(),void(!t&&m.show({content:"回购金服务跑丢了~"}))):void n.ajax({url:"/order/get_mcycle.html",type:"post",headers:{"X-CSRF-TOKEN":s},data:w(e),beforeSend:a.show.bind(null,u),timeout:1e4,success:function(e){a.hide(u),200===e.code?(p||(p=!0,h=!0),l.emit("updateExpressFee",e.data.expressFee),b(e.data),i.resolve()):(i.reject(),l.emit("error","body",e.message||e.msg))},error:function(){a.hide(u),i.reject(),!t&&l.emit("error","body","回购金服务跑丢了~")}})}),i},_=function(e,t){return u=e,k(),C(t,!0,null)};e.exports={init:_,clearRepo:x,getRepoUseState:y,updateRepoData:C,getRepoState:g,on:l.on.bind(l)}},1,function(e,t){e.exports='<div class="order-discount-repo-title">\n  我的回购金余额：\n  <span class="order-discount-repo-price"><%= repo.total.toFixed(2) %></span>\n  <span class="order-discount-repo-desc">（使用说明：系统会根据您选购的商品自动计算出最大可以用回购金数量，以及可享受的魅族商城补贴，该补贴不可退。）</span>\n</div>\n<p class="order-discount-repo-select">\n  <label for="orderDiscountRepoUse">\n    <input type="radio" id="orderDiscountRepoUse" name="orderDiscountRepo" value="1" <%= repo.used ? \'checked="checked"\' : \'\' %> />\n    可使用<span class="order-discount-repo-price"><%= repo.use.toFixed(2) %></span>元回购金\n    <% if (repo.subsidy > 0) { %>\n    +<span class="order-discount-repo-price"><%= repo.subsidy.toFixed(2) %></span>元魅族补贴\n    <% } %>\n  </label>\n</p>\n<p class="order-discount-repo-select">\n  <label for="orderDiscountRepoNotUse">\n    <input type="radio" id="orderDiscountRepoNotUse" name="orderDiscountRepo" value="0" <%= !repo.used ? \'checked="checked"\' : \'\' %> />\n    暂不使用回购金\n  </label>\n</p>\n'},function(e,t,i){i(92);var n=i(8),o=i(12),s=i(9),r=i(30)(),a=i(15),c=i(13),d=i(32),l=i(68),u=o.template(i(95)),p=o.template(i(96)),h=o.template(i(97),{variable:"data"}),v=new c,f=d.checkSelectedPriceOver,m=null,g=null,y=null,b=null,x=!1,k=null,w=0,C=!1,_=new s({type:"tips",title:"提示"}),I=function(e){e=n(e);var t=n(p()).css({display:"none"}).appendTo(e).fadeIn(400);setTimeout(function(){t.fadeOut(400)},2e3)},A=function(){m.on("click","#giftRules",function(){y||(y=new s({type:"msg",title:"了解魅族礼品卡",content:i(98),buttons:[]})),y.show()}),m.on("click",".submit",function(){var e=n(".order-discount-gift-tips"),t=n("input[name=card-number]").val(),i=n("input[name=card-password]").val();if(e.removeClass("shouldShow"),!t&&i&&e.text("礼品卡号不能为空").addClass("shouldShow"),!i&&t&&e.text("密码不能为空").addClass("shouldShow"),i||t||e.text("卡号密码不能为空").addClass("shouldShow"),i&&t){n("input[name=card-number]").val(""),n("input[name=card-password]").val("");var o=new n.Deferred;r.get(function(s,r){return s?(o.reject(),void(!z&&_.show({content:"回购金服务跑丢了~"}))):void n.ajax({url:"/order/check_card.html",type:"post",headers:{"X-CSRF-TOKEN":r},data:{cardNum:t,cardPwd:i},beforeSend:a.show.bind(null,m),timeout:1e4,success:function(s){if(a.hide(m),s.success&&200===s.code){var r=s.data;k=i,b=t,C=!0,x=!1,g=n(".order-discount-gift-content"),r.startDate=l(new Date(r.startTime),"yyyy.MM.dd"),r.endDate=l(new Date(r.endTime),"yyyy.MM.dd"),g.find("div").length&&g.empty(),g.append(h(r)),v.emit("updatePrice",r.price),$(r.price)}else o.reject(),e.text(s.message||s.msg).addClass("shouldShow")},error:function(){a.hide(m),o.reject(),!z&&v.emit("error","body","回购金服务跑丢了~")}})})}})},$=function(e){g.on("click",function(){n(this).hasClass("checked")&&!n(this).hasClass("disabled")?(n(this).removeClass("checked"),x=!0,w=0,n(".gift-total-price").text(w),v.emit("updatePrice",w)):n(this).hasClass("disabled")||(x=!1,v.emit("updatePrice",e))})},T=function(e){var t=f(e,["gift","repo"]);if(t){g.addClass("active disabled checked"),w=0;var i="您的实付金额应大于礼卡金额才能使用";n(".order-discount-gift-disabled-tips").text(i).show(),n(".gift-total-price").text(w),_.show({content:i})}else C&&!g.hasClass("active")&&I("body"),e?g.removeClass("disabled").addClass("active checked"):g.removeClass("disabled checked").addClass("active"),n(".order-discount-gift-disabled-tips").hide(),w=e,n(".gift-total-price").text(w);return x=!1,w},P=function(){return w},D=function(){return C},O=function(){return x},S=function(){g.removeClass("checked"),x=!0,w=0,n(".gift-total-price").text(w),v.emit("updatePrice",w)},E=function(){return{userGiftPwd:k,useGiftId:b}},z=function(e){m=e,m.html(u()),A()};e.exports={init:z,on:v.on.bind(v),getUseGiftNumAndId:E,isGiftOverPrice:T,getGiftPrice:P,isHasGiftCard:D,isUncheckedCanUsed:O,clearGift:S}},1,,,function(e,t){e.exports='<div class="order-discount-gift-item">\n  <div class="order-discount-gift-input">\n    <input type="text" name="card-number" class="mz-input card-number" placeholder="请输入礼品卡号" value="">\n    <input type="text" name="card-password" class="mz-input card-password" placeholder="请输入密码" value="">\n    <button class="mz-btn submit" data-bh="click_store_se_btn_wcoupon">添加并使用</button>\n    <div class="gift-rules" id="giftRules">\n      <div class="gift-rules-icon"></div>\n      <span>使用规则</span>\n    </div>\n  </div>\n  <span class="order-discount-gift-tips"></span>\n  <div class="order-discount-gift-explain">\n    <span>该礼品卡为一次性全额消费卡，选购商品价格需大于礼品卡金额。一次只能消费一张礼卡，该卡一经扣款成功则无法退款。</span>\n  </div>\n  <div class="order-discount-gift-content">\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="order-discount-gift-toast">\n  <div class="gift-toast-content">\n      <div class="gift-toast-content-text">添加成功！</div>\n  </div>\n</div>\n'},function(e,t){e.exports='<div class="order-discount-gift-check"></div>\n<div class="order-discount-gift-tick">\n  <div class="order-discount-gift-tick-left"><%= data.price %></div>\n  <div class="order-discount-gift-tick-right">\n    <div class="order-discount-gift-title">魅族礼品卡</div>\n    <p class="order-discount-gift-num">卡号：<%= data.cardNum %></p>\n    <div class="order-discount-gift-time"><%= data.startDate %> - <%= data.endDate %></div>\n  </div>\n</div>\n<div class="order-discount-gift-disabled-tips"></div>\n<div class="order-discount-gift-total-price">\n  金额抵扣：<span class="gift-total-price">0</span>元\n</div>\n'},function(e,t){e.exports='<div class="gift-regulation">\n  <div class="user-flow">\n    <p class="regulation-title">使用流程</p>\n    <div class="flow-item">\n      <div class="flow-item-circle">\n        <p class="circle-num">1</p>\n        <p>选择购买</p>\n        <p>商品</p>\n      </div>\n      <i class="flow-item-arrow"></i>\n      <div class="flow-item-circle">\n        <p class="circle-num">2</p>\n        <p>订单信息</p>\n        <p>填写</p>\n      </div>\n      <i class="flow-item-arrow"></i>\n      <div class="flow-item-circle">\n        <p class="circle-num">3</p>\n        <p>礼品卡</p>\n        <p>使用</p>\n      </div>\n      <i class="flow-item-arrow"></i>\n      <div class="flow-item-circle">\n        <p class="circle-num">4</p>\n        <p>支付完成</p>\n      </div>\n    </div>\n  </div>\n  <div class="question">\n    <p class="regulation-title">常⻅问题</p>\n    <ul class="question-detail">\n      <li class="q">Q: 什么是魅族礼品卡?</li>\n      <li class="a">A: 该礼品卡为一次性全额消费卡，订单实付金额需大于礼品卡金额。一次只能消费一张礼卡，该卡一经扣款成功 则无法退款。</li>\n      <li class="q">Q: 魅族礼品卡使用范围?</li>\n      <li class="a">A: 该卡仅在魅族商城使用，最低消费金额0.01元。</li>\n      <li class="q">Q: 魅族礼品卡如何退款?</li>\n      <li class="a">A: 魅族礼品卡 为不记名、不挂失、不兑现的产品，卡一经扣款成功后无法做退款操作。</li>\n      <li class="q">Q: 魅族礼品卡一次性可以使用多张吗?</li>\n      <li class="a">A: 魅族礼品卡一次使用1张，系统会帮您计算抵扣金额。</li>\n      <li class="q">Q: 魅族礼品卡可以与商城优惠券，红包，回购金叠加使用吗？</li>\n      <li class="a">A: 魅族礼品卡与商城优惠券/红包/回购金可叠加使用。</li>\n      <li class="q">Q: 魅族礼品卡有效期是多长？</li>\n      <li class="a">A: 魅族礼品卡有效期为1年，建议在有效期范围内使用该卡。 你可以在实体卡背面查看有效期时间。</li>\n    </ul>\n  </div>\n</div>\n\n'},function(e,t){e.exports='<li class="order-discount-item">\n  <div class="order-discount-item-header" data-mdesc="<%= mdesc %>" data-mtype="click_<%= mtype %>" data-bh="click_<%= mtype %>" >\n    <div class="order-discount-item-title"></div>\n    <div class="order-discount-item-right"></div>\n    </div>\n  <div class="order-discount-item-content <%= className %>"></div>\n</li>\n'},function(e,t){e.exports='<div class="order-discount-content-mask">\n  <div class="order-discount-content-tips">\n    <div class="order-discount-content-tips-header">无法选择</div>\n    <div class="order-discount-content-tips-content"><%= msg %></div>\n  </div>\n</div>\n'},function(e,t){e.exports='<span class="order-discount-item-price"><%= data.price.toFixed(2) %><%= data.desc %></span>\n'},function(e,t,i){i(103);var n=i(8),o=i(12),s=i(104),r=i(9),a=n("#orderInvoice"),c=n("#orderInvoiceList"),d=i(70),l=o.template(i(105),{variable:"data"}),u=null,p=null,h=null,v=null,f=null,m=function(e){var t={};for(var i in e)e[i]&&(t[i]=e[i]);return t},g=function(e){v=m(e);var t=n(l(e)).on("click",".order-invoice-item-edit",function(){h.show()}).on("click",".order-invoice-item-delete",function(){f||(f=new r({title:"发票信息",content:"请您确认是否删除发票？"}),f.on("success",function(){h.resetContent(),p.remove(),v=null,p=null,u.show()})),f.show()});u.hide(),p?t.replaceAll(p):c.append(t),p=t},y=function(){return v?n.extend({},v||{},{invoiceType:1}):{invoiceType:0}},b=function(){u=n(s),u.on("click",function(){h||(h=new d({type:"business"}),h.on("invoiceSave",g)),h.show()}),c.append(u),a.show()};e.exports={getInvoiceData:y,businessInvoiceInit:b}},1,function(e,t){e.exports='<li class="order-invoice-item order-invoice-add" data-tips="增值税发票将在收货后30个工作日内开具并邮寄至收货人">\n  <div class="order-add-icon"></div>\n  <div class="order-invoice-add-text">添加增值税发票</div>\n</li>\n'},function(e,t){e.exports='<li class="order-invoice-item">\n  <p>发票抬头：<%= data.invoiceTitle %></p>\n  <p>纳税人识别号：<%= data.invoiceIdentifySn %></p>\n  <p>开户行：<%= data.invoiceBank %></p>\n  <p>开户行账号：<%= data.invoiceBankAccount.replace(/(.{4})/g, \'$1 \') %></p>\n  <% if (data.invoiceOrg === \'05\') {  %>\n  <p>注册地址：<%= data.invoiceAddress %></p>\n  <p>注册电话：<%= data.invoicePhone %></p>\n  <% } %>\n  <div class="order-invoice-item-ctrl">\n    <a href="javascript:void(0);" class="order-invoice-item-link order-invoice-item-edit">修改</a>\n    <a href="javascript:void(0);" class="order-invoice-item-link order-invoice-item-delete">删除</a>\n  </div>\n</li>\n'}]));